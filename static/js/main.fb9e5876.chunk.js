(this["webpackJsonpcsf-gddtool-v4"]=this["webpackJsonpcsf-gddtool-v4"]||[]).push([[0],{253:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),s=a(20),c=a(21),l=a(23),d=a(22),h=a(150),u=a(294),p=a(6),f=a(302),b=a(74),g=a.n(b),m=a(72),j=a(13),O=a(39),y=a(293),x=a(299),D=a(286),v=a(14),_=a.n(v),I=a(75),C=a.n(I),w=a(5),Y=a.n(w),M=window.location.protocol,F=function(e){var t=e.param;return fetch("".concat(M,"//grid2.rcc-acis.org/GridData"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};F.propTypes={param:Y.a.object.isRequired};var z=F,S=window.location.protocol,W=function(e){var t=e.param;return fetch("".concat(S,"//hrly.nrcc.cornell.edu/locHrly"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};W.propTypes={param:Y.a.object.isRequired};var L=W,k=a(30),T=a.n(k),E=a(144),A=a.n(E),P=a(113),R=a.n(P),G=a(145),N=a.n(G),B=a(146),U=a.n(B),H=a(285),V=a(282),J=a(2);A()(T.a),R()(T.a),N()(T.a),window.Highcharts=T.a;var X=function(e){var t,a,n=e.chartWeatherData.dates_for_summary[0].split("-")[0],r=e.chartWeatherData.dates_selected_year.includes(e.chartWeatherData.firstFcstDate),o=e.chartWeatherData.dates_selected_year.indexOf(e.chartWeatherData.firstFcstDate),i=function(e,t){var a,n=0;for(a=0;a<t.length;++a)t[a]===e&&n++;return n},s=[];for(t=0;t<e.chartWeatherData.datesOfFirstFreeze_15yr.length;t++)a=i(e.chartWeatherData.datesOfFirstFreeze_15yr[t],e.chartWeatherData.datesOfFirstFreeze_15yr),s.push({x:_.a.utc(e.chartWeatherData.datesOfFirstFreeze_15yr[t],"YYYY-MM-DD").valueOf(),y:a,color:"rgb(0,0,255)"});var c=[];for(t=0;t<e.chartWeatherData.datesOfLastFreeze_15yr.length;t++)a=i(e.chartWeatherData.datesOfLastFreeze_15yr[t],e.chartWeatherData.datesOfLastFreeze_15yr),c.push({x:_.a.utc(e.chartWeatherData.datesOfLastFreeze_15yr[t],"YYYY-MM-DD").valueOf(),y:a,color:"rgb(0,0,255)"});function l(){var e,t,a='<span style="font-size:14px;font-weight:bold;text-align:center">'+T.a.dateFormat("%b %d, %Y",this.x)+"</span>",n="";for(e=0;e<this.points.length;e++)"Period of Record"!==(t=this.points[e]).series.name&&(n+="<br/>"+t.y.toFixed(0)+' : <span style="color:'+t.color+';font-size:12px;font-weight:bold">'+t.series.name+"</span>"),"Period of Record"===t.series.name&&(n+="<br/>"+t.point.low.toFixed(0)+"-"+t.point.high.toFixed(0)+' : <span font-size:12px;">Period of Record</span>');return a+n}var d,h=e.locInfo.planting_date.slice(6),u=e.chartWeatherData.gdd_ytd_por_min[-62]<100?4:1,p=[];e.targetIsEnabled&&(d=function(){var t,a,n,r;return e.chartWeatherData.gdd_ytd_selected.length>0?Math.max.apply(Math,Object(O.a)(e.chartWeatherData.gdd_ytd_selected))>=e.locInfo.gdd_target?(t=e.chartWeatherData.gdd_ytd_selected.findIndex((function(t){return t>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_selected_year[t],"YYYY-MM-DD").valueOf(),r="Target Observed"):(a=e.chartWeatherData.gdd_ytd_selected.indexOf(Math.max.apply(Math,Object(O.a)(e.chartWeatherData.gdd_ytd_selected))),t=e.chartWeatherData.gdd_ytd_15yr_ave.findIndex((function(t){return t+e.chartWeatherData.gdd_ytd_selected[a]-e.chartWeatherData.gdd_ytd_15yr_ave[a]>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_for_summary[t],"YYYY-MM-DD").valueOf(),r="Target Fcst"):(t=e.chartWeatherData.gdd_ytd_15yr_ave.findIndex((function(t){return t>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_for_summary[t],"YYYY-MM-DD").valueOf(),r="Target Fcst"),{value:n,label:r}}(),p.push({label:{text:d.label,y:30},color:"#4caf50",width:4,zIndex:6,value:d.value}));return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(U.a,{containerProps:{style:{height:"100%"}},highcharts:T.a,options:{plotOptions:{line:{animation:!0},series:{type:"line",animation:!1,lineWidth:4,marker:{symbol:"circle"},states:{hover:{enabled:!0,halo:{size:0}}}}},exporting:{menuItemDefinitions:{downloadCSV:{text:"Download as CSV table"},downloadXLS:{text:"Download as XLS table"}},buttons:{contextButton:{menuItems:["printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","openInCloud"]}}},chart:{marginTop:60,backgroundColor:null},credits:{href:"http://www.rcc-acis.org",text:"Powered by ACIS"},title:{text:h+" Cumulative Growing Degree Days (Base "+e.locInfo.gdd_base+")"},subtitle:{text:e.locInfo.address,style:{"font-size":"14px",color:"#000000"}},tooltip:{useHtml:!0,shared:!0,borderColor:"#000000",borderWidth:2,borderRadius:8,shadow:!1,backgroundColor:"#ffffff",xDateFormat:"%b %d, %Y",positioner:function(){return{x:80,y:60}},shape:"rect",crosshairs:{width:1,color:"#ff0000",snap:!0,zIndex:u},formatter:l},legend:{align:"left",symbolRadius:0,floating:!0,verticalAlign:"top",layout:"vertical",x:65,y:50},xAxis:{type:"datetime",startOnTick:!1,endOnTick:!1,min:_.a.utc(e.locInfo.planting_date,"MM/DD/YYYY").valueOf(),max:"season-outlook"===e.view?_.a.utc(n+"-12-31","YYYY-MM-DD").valueOf():_.a.utc(e.chartWeatherData.dates_selected_year[e.chartWeatherData.dates_selected_year.length-1],"YYYY-MM-DD").valueOf(),labels:{align:"center",x:0,y:20},plotLines:p,dateTimeLabelFormats:{day:"%d %b",week:"%d %b",month:"%b<br/>%Y",year:"%Y"}},yAxis:[{title:{text:"Cumulative GDD",style:{"font-size":"14px",color:"#000000"}},min:0,gridZIndex:1,labels:{style:{color:"#000000"}}},{title:{text:"First/Last Freeze (# yrs)",align:"low",style:{"font-size":"14px",color:"#0000FF"}},min:0,max:8,visible:e.freezeIsEnabled,labels:{style:{color:"#0000FF"}},opposite:!0}],series:[{name:"Season to Date",data:e.chartWeatherData.gdd_ytd_selected.slice(0,o).map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_selected_year[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:24,lineWidth:2,color:"#00dd00",shadow:!1,marker:{enabled:!0,fillColor:"#00dd00",lineWidth:2,lineColor:"#00dd00",radius:2,symbol:"circle"}},{name:"6 Day Forecast",data:e.chartWeatherData.gdd_ytd_selected.slice(o).map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_selected_year[o+a],"YYYY-MM-DD").valueOf(),t]})),showInLegend:r,type:"line",zIndex:24,lineWidth:2,color:"#dd0000",shadow:!1,marker:{enabled:!0,fillColor:"#dd0000",lineWidth:2,lineColor:"#dd0000",radius:2,symbol:"circle"}},{name:"15 Year Average",data:e.chartWeatherData.gdd_ytd_15yr_ave.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:23,lineWidth:2,color:"#0000ff",marker:{enabled:!1,states:{hover:{enabled:!1}}}},{name:'30 Year "Normal"',data:e.chartWeatherData.gdd_ytd_30yr_nor.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:22,lineWidth:2,color:"#B041FF",marker:{enabled:!1,states:{hover:{enabled:!1}}}},{name:"Period of Record",data:e.chartWeatherData.gdd_ytd_por_min.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),e.chartWeatherData.gdd_ytd_por_min[a],e.chartWeatherData.gdd_ytd_por_max[a]]})),type:"arearange",showInLegend:!0,zIndex:10,lineWidth:2,color:"#444444",fillColor:"#eeeeee",fillOpacity:.1,marker:{enabled:!1,states:{hover:{enabled:!1}},symbol:"square",lineWidth:2,lineColor:"#444444",radius:12}},{name:"First/Last Freezes (last 15 yrs)",type:"column",pointWidth:1,borderWidth:0,zIndex:"season-outlook"===e.view?1:25,visible:e.freezeIsEnabled,yAxis:1,showInLegend:e.freezeIsEnabled,enableMouseTracking:!1,data:c.concat(s)}]}}),e.dataIsLoading&&Object(J.jsx)(V.a,{style:{zIndex:1e3},invisible:!0,open:e.dataIsLoading,children:Object(J.jsx)(H.a,{size:200,color:"primary"})})]})},Q=a(260),q=a(297),K=a(115),$=a.n(K),Z=a(11),ee=a.n(Z);a(233),a(234),a(235),a(236),a(237),a(134),a(243),a(253),a(254);window.jQuery=ee.a;var te="".concat("https://maps.google.com/maps/api/js","?key=").concat("AIzaSyDv5pQYe9kRbolVUt0o8XSXSQl4g8BHrrQ"),ae=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initMapDialog=function(){if(!n.state.mapDialogInitialized){var e={width:600,height:500,google:window.google};ee()(".csftool-location-dialog").CsfToolLocationDialog(e),n.map_dialog=ee()(".csftool-location-dialog").CsfToolLocationDialog(),n.map_dialog("bind","close",(function(e,t){var a=t.all_locations,r=t.selected_location;n.props.handleOutput(a,r)})),n.setState({mapDialogInitialized:!0})}},n.openMap=function(){n.map_dialog("locations",n.props.locations),n.map_dialog("open",n.props.selected)},n.handleScriptsLoaded=function(){n.state.googleMapsReady&&n.state.locationDialogReady&&n.initMapDialog()},n.handleLocationDialogLoad=function(){console.log("location dialog script loaded"),n.setState({locationDialogReady:!0}),n.handleScriptsLoaded()},n.handleGoogleMapsLoad=function(){console.log("google maps script loaded"),n.setState({googleMapsReady:!0}),n.handleScriptsLoaded()},n.state={googleMapsReady:!!window.google,locationDialogReady:!1,mapDialogInitialized:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{className:"location-input-div",children:[!this.state.googleMapsReady&&Object(J.jsx)($.a,{isHydrating:!1,type:"text/javascript",src:te,onLoad:this.handleGoogleMapsLoad}),!this.state.locationDialogReady&&Object(J.jsx)($.a,{isHydrating:!1,type:"text/javascript",src:"https://nrcc-cornell.github.io/csf-gddtool-v4/js/location-dialog-min.js",onLoad:this.handleLocationDialogLoad}),this.state.mapDialogInitialized&&Object(J.jsx)(D.a,{variant:"contained",color:"primary",size:"small",onClick:this.openMap,children:"Edit"})]})}}]),a}(n.Component),ne=a(149),re=a(24),oe=a(295),ie=Object(p.a)((function(e){return{}}))((function(e){return Object(J.jsx)(re.a,{utils:ne.a,children:Object(J.jsx)(oe.a,{disableToolbar:!0,views:["date"],variant:"inline",format:"MM/dd/yyyy",minDate:"01/01/1980",maxDate:"12/31/2022",PopoverProps:{style:Object(j.a)({},{left:"180px",top:"-140px"})},margin:"normal",id:"date-picker-inline",label:"Planting Date",value:e.value,onChange:e.onchange,autoOk:!0,InputProps:{readOnly:!0},KeyboardButtonProps:{"aria-label":"change planting date"},style:{width:160}})})})),se=a(298),ce=a(291),le=a(306),de=a(307),he=function(e){return e+"\xb0F"},ue=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:160},menuPaper:{maxHeight:190,backgroundColor:g.a[600],color:"#ffffff"}}}))((function(e){var t=e.classes;return Object(J.jsx)("form",{className:t.root,autoComplete:"off",children:Object(J.jsxs)(ce.a,{className:t.formControl,children:[Object(J.jsx)(le.a,{htmlFor:"gdd_base",children:"GDD Base"}),Object(J.jsx)(se.a,{value:e.value,onChange:e.onchange,margin:"normal",MenuProps:{classes:{paper:t.menuPaper}},inputProps:{name:"gdd_base",id:"gdd_base"},children:e.values&&e.values.map((function(e,t){return Object(J.jsx)(de.a,{value:e,children:he(e)},t)}))})]})})})),pe=a(305),fe=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:100,maxWidth:120}}}))((function(e){var t=e.classes;return Object(J.jsx)("form",{className:t.root,autoComplete:"off",children:Object(J.jsx)(ce.a,{className:t.formControl,children:Object(J.jsx)(pe.a,{fullWidth:!0,color:"primary",label:"GDD Target",margin:"none",value:e.value,disabled:!e.enabled,onChange:e.onchange,inputProps:{name:"gdd_target",id:"gdd_target"}})})})})),be=a(300),ge=a(92),me=a(292),je=Object(p.a)({root:{color:ge.a[600],"&$checked":{color:ge.a[800]}},checked:{}})((function(e){return Object(J.jsx)(be.a,Object(j.a)({color:"default"},e))})),Oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)(me.a,{control:Object(J.jsx)(je,{checked:this.props.value,onChange:this.props.onchange,name:"enableTarget"}),label:""})}}]),a}(n.Component),ye=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:100,maxWidth:120}}}))((function(e){var t=e.classes;return Object(J.jsx)("form",{className:t.root,autoComplete:"off",children:Object(J.jsx)(ce.a,{className:t.formControl,children:Object(J.jsx)(pe.a,{fullWidth:!0,color:"primary",label:"Frost Temp (\xb0F)",margin:"none",value:e.value,disabled:!e.enabled,onChange:e.onchange,inputProps:{name:"freeze_threshold",id:"freeze_threshold"}})})})})),xe=Object(p.a)({root:{color:ge.a[600],"&$checked":{color:ge.a[800]}},checked:{}})((function(e){return Object(J.jsx)(be.a,Object(j.a)({color:"default"},e))})),De=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)(me.a,{control:Object(J.jsx)(xe,{checked:this.props.value,onChange:this.props.onchange,name:"enableTarget"})})}}]),a}(n.Component),ve=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)(q.a,{paddingTop:1,border:2,borderRadius:4,borderColor:"primary.main",children:Object(J.jsxs)(y.a,{container:!0,item:!0,direction:"column",spacing:3,children:[Object(J.jsxs)(y.a,{container:!0,item:!0,direction:"column",spacing:0,children:[Object(J.jsx)(y.a,{item:!0,container:!0,justify:"center",alignItems:"center",children:Object(J.jsxs)(Q.a,{style:{marginRight:30,marginLeft:30},children:[Object(J.jsx)("b",{children:"Current Location:"}),Object(J.jsx)("br",{}),this.props.locations[this.props.selected].address]})}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(J.jsx)(y.a,{item:!0,children:Object(J.jsx)(ae,{namespace:"CSF-GDDTOOL",locations:this.props.locations,selected:this.props.selected,handleOutput:this.props.onchange_locationPicker})}),Object(J.jsx)(y.a,{item:!0,children:Object(J.jsx)(D.a,{variant:"summary"===this.props.view?"contained":"outlined",color:"primary",size:"small",disabled:!0,onClick:function(){return e.props.onchange_view("summary")},children:"Summary"})})]})]}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(J.jsx)(y.a,{item:!0,children:Object(J.jsx)(ie,{value:this.props.locations[this.props.selected].planting_date,onchange:this.props.onchange_plantingDate})}),Object(J.jsx)(y.a,{item:!0,children:Object(J.jsx)(ue,{value:this.props.locations[this.props.selected].gdd_base,values:this.props.gdd_list,onchange:this.props.onchange_locInfo})}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"flex-end",children:[Object(J.jsx)(Oe,{value:this.props.targetIsEnabled,onchange:this.props.onchange_targetIsEnabled}),Object(J.jsx)(fe,{value:this.props.locations[this.props.selected].gdd_target,enabled:this.props.targetIsEnabled,onchange:this.props.onchange_locInfo})]}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"flex-end",children:[Object(J.jsx)(De,{value:this.props.freezeIsEnabled,onchange:this.props.onchange_freezeIsEnabled}),Object(J.jsx)(ye,{value:this.props.locations[this.props.selected].freeze_threshold,enabled:this.props.freezeIsEnabled,onchange:this.props.onchange_locInfo})]})]})]})})}}]),a}(r.a.Component),_e=a(147),Ie=a.n(_e),Ce=a(303),we=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.anchorEl,t=Boolean(e);return Object(J.jsxs)("div",{children:[Object(J.jsxs)(D.a,{variant:"text",color:"secondary",size:"small",onClick:this.handleClick,children:[Object(J.jsx)(Ie.a,{}),"Select chart details"]}),Object(J.jsx)(Ce.a,{id:"simple-popper",open:t,anchorEl:e,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:this.props.content})]})}}]),a}(r.a.Component),Ye=Object(p.a)((function(e){return{typography:{margin:e.spacing(2)}}}))(we),Me=function(){return Object(J.jsxs)(q.a,{maxWidth:800,padding:1,border:1,borderRadius:4,borderColor:"primary.main",bgcolor:"#f5f5dc",children:[Object(J.jsx)("h2",{children:"Data Sources and methods"}),Object(J.jsxs)("h4",{children:[Object(J.jsx)("br",{}),"\u2022 ABOUT THE GROWING DEGREE DAY CALCULATOR"]}),Object(J.jsx)("p",{children:"This tool plots Growing Degree Days (GDD), also called Growing Degree Units (GDUs), which measure heat accumulation in order to predict plant and insect development. In a stress-free environment, the development rate of a plant is dependent on temperature. Using the expected temperature of the summer season, based on previous years, this tool can help predict the best days to plant, harvest, and fertilize."}),Object(J.jsx)("p",{children:"GDDs are calculated by taking the average of the daily maximum and minimum air temperature, and then subtracting a base temperature. The base temperature is the lowest temperature at which a crop will grow."}),Object(J.jsxs)("h4",{children:[Object(J.jsx)("br",{}),"\u2022 COMMON BASE TEMPERATURES USED FOR GDD CALCULATION"]}),Object(J.jsx)("p",{children:"50\xb0F is the most common base for GDD calculations. However, a number of other bases are used depending on the lifecycle of the plant or insect of interest. Here is a small sample:"}),Object(J.jsxs)("ul",{children:[Object(J.jsx)("i",{children:"Plants"}),Object(J.jsx)("li",{children:"50\xb0F : corn, sorghum, soybeans, tomato"}),Object(J.jsx)("li",{children:"46\xb0F : sunflower, potato"}),Object(J.jsx)("li",{children:"42\xb0F : wheat, barley, rye, oats, flaxseed, lettuce, asparagus"})]}),Object(J.jsxs)("ul",{children:[Object(J.jsx)("i",{children:"Insects and Diseases"}),Object(J.jsx)("li",{children:"52\xb0F : Green Cloverworm"}),Object(J.jsx)("li",{children:"50\xb0F : Codling moth, Apple maggot"}),Object(J.jsx)("li",{children:"48\xb0F : Alfalfa weevil"}),Object(J.jsx)("li",{children:"45\xb0F : Corn rootworm, Oriental fruit moth"}),Object(J.jsx)("li",{children:"43\xb0F : Stalk Borer"}),Object(J.jsx)("li",{children:"40\xb0F : Onion maggot"}),Object(J.jsx)("li",{children:"39\xb0F : Cabbage maggot"}),Object(J.jsx)("li",{children:"32\xb0F : Apple scab"})]}),Object(J.jsx)("h4",{children:"\u2022 AIR TEMPERATURE DATA"}),Object(J.jsxs)("p",{children:["The 2.5 x 2.5 mile gridded dataset of maximum and minimum air temperatures is produced daily for the Northeast United States by the ",Object(J.jsx)("a",{href:"http://www.nrcc.cornell.edu",target:"_blank",rel:"noopener noreferrer",children:"Northeast Regional Climate Center"}),", using methods described in Degaetano and Belcher (2007). These data are available for use through the Applied Climate Information System (",Object(J.jsx)("a",{href:"http://www.rcc-acis.org",target:"_blank",rel:"noopener noreferrer",children:"ACIS"}),") web service."]}),Object(J.jsx)("p",{children:"Degaetano, A.T. and B.N. Belcher. (2007). Spatial Interpolation of Daily Maximum and Minimum Air Temperature Based on Meteorological Model Analyses and Independent Observations. Journal of Applied Meteorology and Climatology. 46."}),Object(J.jsx)("h4",{children:"\u2022 FORECASTS AND OUTLOOKS"}),Object(J.jsx)("p",{children:"Six-day forecasts of daily temperature extremes obtained through the National Weather Service's National Digital Forecast Database (Glahn and Ruth, 2003) provide the means to produce 6-day GDD forecasts."}),Object(J.jsx)("p",{children:"Seasonal outlooks are produced based on historical observations over recent decades. Minimum, maximum and average observed GDD accumulation over previous seasons provide expected guidelines and reference points based on what has occurred at a specific location in the past."}),Object(J.jsx)("p",{children:"Glahn, H. R., and D. P. Ruth, 2003: The new digital forecast database of the National Weather Service. Bull. Amer. Meteor. Soc., 84, 195\u2013201."})]})},Fe=a(288),ze=a(148),Se=a.n(ze),We=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t);return Object(J.jsxs)("div",{children:[Object(J.jsx)(Fe.a,{color:"inherit","aria-label":"Help",className:e.menuButton,onClick:this.handleClick,children:Object(J.jsx)(Se.a,{})}),Object(J.jsx)(Ce.a,{id:"simple-popper",open:a,anchorEl:t,onClick:this.handleClose,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:this.props.content})]})}}]),a}(r.a.Component),Le=Object(p.a)((function(e){return{typography:{margin:e.spacing(2)},menuButton:{marginRight:-60,marginTop:-10}}}))(We);function ke(e,t,a,n,r){var o={},i=function(e,t,a){var n;function r(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n){var r=n[0],o=n[1];e=e>r?r:e,t=t<o?o:t}return Math.max.apply(Math,[(e+t)/2-a,0])}var o=_()(t,"MM/DD/YYYY").subtract(1,"day").format("MM-DD"),i="86/50"===a?50:a,s="86/50"===a?[86,50]:null;return e.map((n=0,function(e){return[e[0],e[0].slice(5)===o?n=0:n+=r(e[1],e[2],i,s)]}))}(function(e){return e.map((function(e){return[(t=e[0],_()(t,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD")),e[1],e[2]];var t})).slice(1)}(e),a,n);return o=Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},o),function(e,t){var a=t.slice(6,10)+"-"+t.slice(0,2)+"-"+t.slice(3,5),n=t.slice(6,10),r=null;return{dates_selected_year:(r=e.filter((function(e,t,r){return e[0].split("-")[0]===n&&a<=e[0]}))).map((function(e){return e[0]})),gdd_ytd_selected:r.map((function(e){return-999!==e[1]?e[1]:null}))}}(i,a)),function(e,t){var a=t.slice(6,10)+"-"+t.slice(0,2)+"-"+t.slice(3,5),n=t.slice(6,10),r=_()().format("YYYY"),o=_()([n]).isLeapYear(),i=null,s=null,c=[],l=[],d=[],h=[],u=[],p=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length};function f(e,t,a){return e[0].slice(5)===this}return i=e.filter((function(e,t,n){var o=e[0].split("-")[0]!==r,i=a.slice(5)<=e[0].slice(5);return o&&i})),(s=Object(O.a)(new Set(i.map((function(e){return e[0].slice(5)}))))).sort(),s.forEach((function(e){if("02-29"!==e||o){var t=i.filter(f,e).map((function(e){return e[1]}));c.push(n+"-"+e),l.push(Math.max.apply(Math,Object(O.a)(t))),d.push(Math.min.apply(Math,Object(O.a)(t))),h.push(p(t.slice(-15))),u.push(p(t.slice(1991-parseInt(r,10),2020-parseInt(r,10))))}})),{dates_for_summary:c,gdd_ytd_por_max:l,gdd_ytd_por_min:d,gdd_ytd_15yr_ave:h,gdd_ytd_30yr_nor:u}}(i,a)),function(e,t,a){if(!a)return{datesOfFirstFreeze_15yr:[],datesOfLastFreeze_15yr:[]};for(var n,r,o,i,s=t.slice(6,10),c=_()().format("YYYY"),l=[],d=[],h=[],u=e.map((function(e){return e[0]})),p=1;p<16;p++)l.push(parseInt(c,10)-p);function f(e,t,n){return e[2]<=parseInt(a,10)}return(n=l.map((function(e){return e.toString()+"-06-30"}))).sort(),n.forEach((function(t){r=u.indexOf(t),(o=e.slice(r-180,r).filter(f)).length>0?h.push(o.slice(-1)[0][0]):h=[],(i=e.slice(r,r+180).filter(f)).length>0?d.push(i[0][0]):d=[]})),d=d.map((function(e){return s+e.slice(4)})),h=h.map((function(e){return s+e.slice(4)})),d.length>0&&d.sort(),h.length>0&&h.sort(),{datesOfFirstFreeze_15yr:d,datesOfLastFreeze_15yr:h}}(e,a,r)),function(e){return{firstFcstDate:e}}(t))}var Te=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addOneDayToStringDate=function(e){return _()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")},n.subtractOneDayToStringDate=function(e){return _()(e,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD")},n.loadAllData=function(){n.handleDataIsLoadingChange(!0),setTimeout((function(){z({param:n.getAcisParamsObs()}).then((function(e){var t=e.data,a=t.slice(-1)[0][0];L({param:n.getAcisParamsFcst(a)}).then((function(e){var r,o,i=[];"dlyData"in e&&(r=i).push.apply(r,Object(O.a)(e.dlyData.map((function(e){return[n.addOneDayToStringDate(e[0].split("T")[0]),parseInt(e[2],10),parseInt(e[3],10)]}))));"dlyFcstData"in e&&(o=i).push.apply(o,Object(O.a)(e.dlyFcstData.map((function(e){return[n.addOneDayToStringDate(e[0].split("T")[0]),parseInt(e[1],10),parseInt(e[2],10)]}))));i=i.filter((function(e){return e[0]>a}));var s={data:t.concat(i),last_obs_date:a};n.handleDataChange(s),n.handleDataIsLoadingChange(!1)}))}))}),1e3)},n.getAcisParamsObs=function(){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loc:[n.state.locations[n.state.selected].lng,n.state.locations[n.state.selected].lat].join(),sdate:"1980-01-01",edate:_()().format("YYYY-MM-DD"),grid:"nrcc-model",elems:[{name:"maxt",interval:[0,0,1]},{name:"mint",interval:[0,0,1]}]})}},n.getAcisParamsFcst=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:n.state.locations[n.state.selected].lat,lon:n.state.locations[n.state.selected].lng,tzo:-5,sdate:e.replaceAll("-","")+"00",edate:"now"})}},n.handleSelectedLocationChange=function(e){n.setState({selected:e})},n.handleLocationInfoChange=function(e){var t=e.target.name,a=e.target.value;n.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{locations:Object(j.a)(Object(j.a)({},e.locations),Object(m.a)({},e.selected,Object(j.a)(Object(j.a)({},e.locations[e.selected]),{},Object(m.a)({},t,a))))})}))},n.handleLocationPickerOutput=function(e,t){var a={};for(var r in e)e.hasOwnProperty(r)&&(n.state.locations.hasOwnProperty(r)?a[r]=Object(j.a)(Object(j.a)(Object(j.a)({},n.defaultLocation),n.state.locations[r]),e[r]):a[r]=Object(j.a)(Object(j.a)({},n.defaultLocation),e[r]));n.setState({locations:a,selected:t.id})},n.handleDataChange=function(e){n.setState({pointData:e})},n.handleViewChange=function(e){n.setState({view:e})},n.handleDataIsLoadingChange=function(e){n.setState({dataIsLoading:e})},n.handlePlantingDateChange=function(){var e={target:{name:"planting_date",value:arguments.length<=1?void 0:arguments[1]}};n.handleLocationInfoChange(e)},n.handleTargetIsEnabledChange=function(){n.setState((function(e){return{targetIsEnabled:!e.targetIsEnabled}}))},n.handleFreezeIsEnabledChange=function(){n.setState((function(e){return{freezeIsEnabled:!e.freezeIsEnabled}}))},n.gdd_list=["86/50","50","49","48","47","46","45","44","43","42","41","40","39","38","37","36","35","34","33","32"],n.defaultLocation={address:"Cornell University, Ithaca, NY",lat:42.45,lng:-76.48,id:"default",planting_date:"01/01/2022",gdd_base:"50",gdd_target:"1500",freeze_threshold:"32"},n.defaultLocations={default:n.defaultLocation},n.state={locations:C()("CSF-GDDTOOL.locations")||n.defaultLocations,selected:C()("CSF-GDDTOOL.selected")||n.defaultLocation.id,pointData:null,dataIsLoading:!1,targetIsEnabled:!1,freezeIsEnabled:!1,view:"season-outlook"},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.state.locations&&this.state.selected&&this.loadAllData()}},{key:"componentDidUpdate",value:function(e,t){t.selected!==this.state.selected&&this.loadAllData(),t.locations!==this.state.locations&&C.a.set("CSF-GDDTOOL.locations",this.state.locations),t.selected!==this.state.selected&&C.a.set("CSF-GDDTOOL.selected",this.state.selected)}},{key:"render",value:function(){var e,t,a,n=this;return this.state.pointData&&(e=Object(J.jsx)(X,{locInfo:this.state.locations[this.state.selected],freezeIsEnabled:this.state.freezeIsEnabled,targetIsEnabled:this.state.targetIsEnabled,chartWeatherData:ke(this.state.pointData.data,this.state.pointData.last_obs_date,this.state.locations[this.state.selected].planting_date,this.state.locations[this.state.selected].gdd_base,this.state.locations[this.state.selected].freeze_threshold),view:this.state.view,dataIsLoading:this.state.dataIsLoading})),t=Object(J.jsx)(ve,{locations:this.state.locations,selected:this.state.selected,view:this.state.view,targetIsEnabled:this.state.targetIsEnabled,freezeIsEnabled:this.state.freezeIsEnabled,gdd_list:this.gdd_list,onchange_locationPicker:this.handleLocationPickerOutput,onchange_view:this.handleViewChange,onchange_plantingDate:this.handlePlantingDateChange,onchange_locInfo:this.handleLocationInfoChange,onchange_targetIsEnabled:this.handleTargetIsEnabledChange,onchange_freezeIsEnabled:this.handleFreezeIsEnabledChange}),a=Object(J.jsx)(Ye,{content:t}),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(y.a,{container:!0,direction:"row",justify:"stretch",spacing:0,children:[Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"column",justify:"top",alignItems:"center",spacing:1,md:!0,children:[Object(J.jsx)(x.a,{mdUp:!0,children:Object(J.jsx)(y.a,{item:!0,children:a})}),Object(J.jsx)(x.a,{smDown:!0,children:Object(J.jsx)(y.a,{item:!0,children:t})})]}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,md:9,children:[Object(J.jsx)(y.a,{item:!0,style:{width:"100%",height:"70vh"},children:this.state.pointData&&e}),Object(J.jsxs)(y.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(J.jsx)(y.a,{item:!0,children:this.state.pointData&&Object(J.jsx)(D.a,{variant:"season-to-date"===this.state.view?"contained":"outlined",color:"primary",size:"small",onClick:function(){return n.handleViewChange("season-to-date")},children:"Season To Date"})}),Object(J.jsx)(y.a,{item:!0,children:this.state.pointData&&Object(J.jsx)(D.a,{variant:"season-outlook"===this.state.view?"contained":"outlined",color:"primary",size:"small",onClick:function(){return n.handleViewChange("season-outlook")},children:"Season Outlook"})}),Object(J.jsx)(y.a,{item:!0,children:this.state.pointData&&Object(J.jsx)(Le,{content:Object(J.jsx)(Me,{})})})]})]})]}),Object(J.jsx)("div",{className:"csftool-location-dialog"})]})}}]),a}(n.Component),Ee=Object(h.a)({shadows:Array(25).fill("none"),palette:{primary:{main:g.a[800]},alternativeTextColor:g.a[800]},overrides:{MUIDataTableBodyRow:{root:{"&:nth-child(odd)":{backgroundColor:"#D3D3D3"}}}},typography:{body2:{fontSize:"0.8rem","@media (min-width:960px)":{fontSize:"1.0rem"}}}}),Ae=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)(u.a,{theme:Ee,children:Object(J.jsx)("div",{id:"container",className:"App",children:Object(J.jsx)(Te,{})})})}}]),a}(n.Component),Pe=Object(p.a)((function(e){return{root:{}}}))(Object(f.a)(Ae));i.a.render(Object(J.jsx)(Pe,{}),document.getElementById("csftool-content"))}},[[256,1,2]]]);
//# sourceMappingURL=main.fb9e5876.chunk.js.map