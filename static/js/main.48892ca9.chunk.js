(this["webpackJsonpcsf-gddtool-v4"]=this["webpackJsonpcsf-gddtool-v4"]||[]).push([[0],{150:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),s=a(19),c=a(20),l=a(24),d=a(23),h=a(116),u=a(214),p=a(6),b=a(222),f=a(61),j=a.n(f),m=a(41),g=a(7),O=a(38),x=a(213),y=a(219),v=a(207),D=a(13),_=a.n(D),C=a(63),w=a.n(C),I=a(17),k=(a(150),a(88)),Y=a.n(k),M=a(108),S=(a(152),a(109)),F=a.n(S),W=a(62),L=a(2);function E(e){return Object(L.jsx)(L.Fragment,{children:Object.keys(e.pastLocations).map((function(t){var a=e.pastLocations[t],n=a.id===e.currentLocation.id;return Object(L.jsx)(W.a,{longitude:a.lng,latitude:a.lat,onClick:function(t){return e.onMarkerClick(t,a)},style:{zIndex:n?2:1,top:-20},children:Object(L.jsx)("div",{className:n?"loc-curr-marker":"loc-marker",onMouseEnter:function(){return e.onMarkerMouseEnter(Object(g.a)(Object(g.a)({},a),{},{isSelected:n}))},onMouseLeave:e.onMarkerMouseLeave,onContextMenu:function(){return e.onMarkerRightClick(a,n)}})},a.address)}))})}function z(e,t){"string"===typeof e&&(e=parseFloat(e));var a=(Math.round(Math.round(e*Math.pow(10,t+1))/10)/Math.pow(10,t)).toFixed(t);return parseFloat(a)}function T(e,t,a,n){return fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,",").concat(t,".json?limit=1&access_token=").concat(a),{method:"GET"}).then((function(e){return e.json()})).then((function(a){var r=a.features[0].context.find((function(e){return"region"===e.id.split(".")[0]}));if(n&&!n.includes(r.text))throw new Error("Out of Bounds");return{address:a.features[0].place_name.replace(", United States","").replace(/\s\d{5}/g,""),lng:e,lat:t}})).catch((function(){return!1}))}function A(e){var t=1/0,a=-1/0,n=1/0,r=-1/0;Object.values(e).forEach((function(e){e.lat>a&&(a=e.lat),e.lat<t&&(t=e.lat),e.lng>r&&(r=e.lng),e.lng<n&&(n=e.lng)}));var o=.1;return t===a&&(t-=o,a+=o),n===r&&(n-=o,r+=o),[n,t,r,a]}function P(e){F.a.accessToken=e.token;var t=Object(n.useState)(null),a=Object(I.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)({bounds:A(e.pastLocations),fitBoundsOptions:{padding:{top:100,bottom:10,left:15,right:15}}}),s=Object(I.a)(i,2),c=s[0],l=s[1],d=function(){var t=Object(M.a)(Y.a.mark((function t(a){var n,r,o;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.lngLat.lng,r=a.lngLat.lat,!(n>=e.bbox.west&&n<=e.bbox.east&&r>=e.bbox.south&&r<=e.bbox.north)){t.next=7;break}return t.next=5,T(n,r,e.token,e.allowedStates);case 5:(o=t.sent)&&e.mapRef.current&&(e.handleChangeLocations("add",o),e.mapRef.current.flyTo({center:[o.lng,o.lat],speed:.8,essential:!0}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsx)("div",{id:"loc-map",children:Object(L.jsxs)(W.c,Object(g.a)(Object(g.a)({},c),{},{ref:e.mapRef,mapStyle:"mapbox://styles/mapbox/satellite-streets-v11",boxZoom:!1,dragRotate:!1,touchPitch:!1,doubleClickZoom:!1,attributionControl:!1,onMove:function(t){return((a=t.viewState).latitude>e.bbox.north||a.latitude<e.bbox.south)&&(a.latitude=c.latitude),(a.longitude>e.bbox.east||a.longitude<e.bbox.west)&&(a.longitude=c.longitude),void l((function(e){return Object(g.a)(Object(g.a)({},e),a)}));var a},onClick:d,children:[Object(L.jsx)(E,{currentLocation:e.currentLocation,pastLocations:e.pastLocations,onMarkerMouseEnter:function(e){o(e)},onMarkerMouseLeave:function(){o(null)},onMarkerClick:function(t,a){t.originalEvent.stopPropagation(),e.handleChangeLocations("change",a)},onMarkerRightClick:function(t,a){a||(e.handleChangeLocations("remove",t),o(null))}}),r&&Object(L.jsxs)(W.b,{longitude:r.lng,latitude:r.lat,closeOnClick:!1,closeButton:!1,onClose:function(){return o(null)},offset:{center:[0,0],left:[12,0],right:[-12,0],top:[0,-6],"top-left":[10,3],"top-right":[-20,3],bottom:[0,-16],"bottom-left":[10,-12],"bottom-right":[-20,-12]},style:{zIndex:4},children:[Object(L.jsx)("h3",{children:r.address}),Object(L.jsxs)("h4",{children:["Coordinates: ",z(r.lng,5),", ",z(r.lat,5)]}),r.isSelected?"":Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h5",{children:"Click to Use"}),"ontouchstart"in window||navigator.maxTouchPoints>0?Object(L.jsx)("h5",{children:"Click and Hold to Remove"}):Object(L.jsx)("h5",{children:"Right Click to Remove"})]})]})]}))})}function R(e){var t=Object(n.useState)(""),a=Object(I.a)(t,2),r=a[0],o=a[1],i=function(){fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(r.split(" ").join("%20"),".json?proximity=-75.37,43.21&country=US&types=postcode,place,address&access_token=").concat(e.token),{method:"GET"}).then((function(e){return e.json()})).then((function(t){var a=t.features.reduce((function(t,a){var n=a.context.find((function(t){return t.id.includes("region")&&(!e.allowedStates||e.allowedStates.includes(t.text))}));if(!t&&n&&a.center[0]>=e.bbox.west&&a.center[1]>=e.bbox.south){var r,o=a.place_type[0];if("postcode"===o)r=a.place_name.split(",").slice(0,2).join(",");else if("place"===o)r="".concat(a.text,", ").concat(n.text);else if("address"===o){var i=a.context.find((function(e){return e.id.includes("place")}));r="".concat(a.text,", ").concat(i.text,", ").concat(n.text)}return{address:r,lng:a.center[0],lat:a.center[1]}}return t}),!1);a&&(o(a.address),e.handleChangeLocations("add",a),e.mapRef.current.flyTo({center:[a.lng,a.lat],speed:.8,essential:!0}))})).catch((function(e){return console.log(e),!1}))};return Object(L.jsxs)("div",{id:"loc-map-bar",children:[Object(L.jsx)("input",{id:"loc-map-address-search",type:"text",onChange:function(e){return o(e.target.value)},onKeyDown:function(e){return"Enter"===e.key?i():""},value:r}),Object(L.jsx)("label",{id:"loc-map-bar-label",children:"Address Search"}),Object(L.jsx)("button",{id:"loc-map-bar-btn",onClick:i,children:"Search"}),Object(L.jsx)("div",{id:"loc-modal-close",onClick:e.handleClose,children:"X"})]})}var N={north:47.53,south:37.09,east:-66.89,west:-82.7542},G={default:{address:"213 Warren Road, Ithaca, New York",id:"default",lat:42.457975,lng:-76.46754}};function B(e){var t=Object(n.useState)(!1),a=Object(I.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(0),s=Object(I.a)(i,2),c=s[0],l=s[1],d=Object(n.useState)(Object.keys(e.locations).length>0?e.locations:G),h=Object(I.a)(d,2),u=h[0],p=h[1],b=Object(n.useState)(e.selected||"default"),f=Object(I.a)(b,2),j=f[0],O=f[1],x=Object(n.useRef)(null);Object(n.useEffect)((function(){!0===r?l("100vh"):!1===r&&setTimeout((function(){l(0)}),400)}),[r]);var y=function(){e.newLocationsCallback(j,u),o(!1)},v=function(e,t){"add"===e&&(t.id=String(Date.now()),p((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(m.a)({},t.id,Object(g.a)(Object(g.a)({},t),{},{id:t.id})))}))),"remove"===e&&p((function(e){var a=Object(g.a)({},e);return delete a[t.id],a})),"add"!==e&&"change"!==e||O(t.id)};return Object(L.jsxs)("div",{id:"loc-container",style:{zIndex:e.modalZIndex||100},children:[Object(L.jsx)("div",{id:"loc-location-text",children:u[j].address}),Object(L.jsx)("div",{id:"loc-location-change",onClick:function(){return o(!0)},children:"Change Location"}),Object(L.jsx)("div",{id:"loc-modal-container",style:{height:c,opacity:r?1:0},onMouseDown:y,children:Object(L.jsxs)("div",{id:"loc-modal-box",onMouseDown:function(e){return e.stopPropagation()},children:[Object(L.jsx)(R,{token:e.token,bbox:e.bbox||N,allowedStates:e.allowedStates,mapRef:x,handleChangeLocations:v,handleClose:y}),Object(L.jsx)(P,{token:e.token,allowedStates:e.allowedStates,bbox:e.bbox||N,mapRef:x,handleChangeLocations:v,currentLocation:u[j],pastLocations:u})]})})]})}var U=a(5),H=a.n(U),J=window.location.protocol,V=function(e){var t=e.param;return fetch("".concat(J,"//grid2.rcc-acis.org/GridData"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};V.propTypes={param:H.a.object.isRequired};var Z=V,q=window.location.protocol,K=function(e){var t=e.param;return fetch("".concat(q,"//hrly.nrcc.cornell.edu/locHrly"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};K.propTypes={param:H.a.object.isRequired};var X=K,Q=a(29),$=a.n(Q),ee=a(110),te=a.n(ee),ae=a(86),ne=a.n(ae),re=a(111),oe=a.n(re),ie=a(112),se=a.n(ie),ce=a(205),le=a(202);te()($.a),ne()($.a),oe()($.a),window.Highcharts=$.a;var de=function(e){var t,a=_()().format("YYYY"),n=e.chartWeatherData.dates_for_summary[0].split("-")[0],r=e.chartWeatherData.dates_selected_year.includes(e.chartWeatherData.firstFcstDate);t=n===a?e.chartWeatherData.dates_selected_year.indexOf(e.chartWeatherData.firstFcstDate):e.chartWeatherData.dates_selected_year.length;var o,i,s=function(e,t){var a,n=0;for(a=0;a<t.length;++a)t[a]===e&&n++;return n},c=[];for(o=0;o<e.chartWeatherData.datesOfFirstFreeze_15yr.length;o++)i=s(e.chartWeatherData.datesOfFirstFreeze_15yr[o],e.chartWeatherData.datesOfFirstFreeze_15yr),c.push({x:_.a.utc(e.chartWeatherData.datesOfFirstFreeze_15yr[o],"YYYY-MM-DD").valueOf(),y:i,color:"rgb(0,0,255)"});var l=[];for(o=0;o<e.chartWeatherData.datesOfLastFreeze_15yr.length;o++)i=s(e.chartWeatherData.datesOfLastFreeze_15yr[o],e.chartWeatherData.datesOfLastFreeze_15yr),l.push({x:_.a.utc(e.chartWeatherData.datesOfLastFreeze_15yr[o],"YYYY-MM-DD").valueOf(),y:i,color:"rgb(0,0,255)"});function d(){var e,t,a='<span style="font-size:14px;font-weight:bold;text-align:center">'+$.a.dateFormat("%b %d, %Y",this.x)+"</span>",n="";for(e=0;e<this.points.length;e++)"Period of Record"!==(t=this.points[e]).series.name&&(n+="<br/>"+t.y.toFixed(0)+' : <span style="color:'+t.color+';font-size:12px;font-weight:bold">'+t.series.name+"</span>"),"Period of Record"===t.series.name&&(n+="<br/>"+t.point.low.toFixed(0)+"-"+t.point.high.toFixed(0)+' : <span font-size:12px;">Period of Record</span>');return a+n}var h,u=e.locInfo.planting_date.slice(6),p=e.chartWeatherData.gdd_ytd_por_min[-62]<100?4:1,b=[];e.targetIsEnabled&&(h=function(){var t,a,n,r;return e.chartWeatherData.gdd_ytd_selected.length>0?Math.max.apply(Math,Object(O.a)(e.chartWeatherData.gdd_ytd_selected))>=e.locInfo.gdd_target?(t=e.chartWeatherData.gdd_ytd_selected.findIndex((function(t){return t>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_selected_year[t],"YYYY-MM-DD").valueOf(),r="Target Observed"):(a=e.chartWeatherData.gdd_ytd_selected.indexOf(Math.max.apply(Math,Object(O.a)(e.chartWeatherData.gdd_ytd_selected))),t=e.chartWeatherData.gdd_ytd_15yr_ave.findIndex((function(t){return t+e.chartWeatherData.gdd_ytd_selected[a]-e.chartWeatherData.gdd_ytd_15yr_ave[a]>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_for_summary[t],"YYYY-MM-DD").valueOf(),r="Target Fcst"):(t=e.chartWeatherData.gdd_ytd_15yr_ave.findIndex((function(t){return t>e.locInfo.gdd_target})),n=_.a.utc(e.chartWeatherData.dates_for_summary[t],"YYYY-MM-DD").valueOf(),r="Target Fcst"),{value:n,label:r}}(),b.push({label:{text:h.label,y:30},color:"#4caf50",width:4,zIndex:6,value:h.value}));return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(se.a,{containerProps:{style:{height:"100%"}},highcharts:$.a,options:{plotOptions:{line:{animation:!0},series:{type:"line",animation:!1,lineWidth:4,marker:{symbol:"circle"},states:{hover:{enabled:!0,halo:{size:0}}}}},exporting:{menuItemDefinitions:{downloadCSV:{text:"Download as CSV table"},downloadXLS:{text:"Download as XLS table"}},buttons:{contextButton:{menuItems:["printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","openInCloud"]}}},chart:{marginTop:60,backgroundColor:null},credits:{href:"http://www.rcc-acis.org",text:"Powered by ACIS"},title:{text:u+" Cumulative Growing Degree Days (Base "+e.locInfo.gdd_base+")"},subtitle:{text:e.locInfo.address,style:{"font-size":"14px",color:"#000000"}},tooltip:{useHtml:!0,shared:!0,borderColor:"#000000",borderWidth:2,borderRadius:8,shadow:!1,backgroundColor:"#ffffff",xDateFormat:"%b %d, %Y",positioner:function(){return{x:80,y:60}},shape:"rect",crosshairs:{width:1,color:"#ff0000",snap:!0,zIndex:p},formatter:d},legend:{align:"left",symbolRadius:0,floating:!0,verticalAlign:"top",layout:"vertical",x:65,y:50},xAxis:{type:"datetime",startOnTick:!1,endOnTick:!1,min:_.a.utc(e.locInfo.planting_date,"MM/DD/YYYY").valueOf(),max:"season-outlook"===e.view?_.a.utc(n+"-12-31","YYYY-MM-DD").valueOf():_.a.utc(e.chartWeatherData.dates_selected_year[e.chartWeatherData.dates_selected_year.length-1],"YYYY-MM-DD").valueOf(),labels:{align:"center",x:0,y:20},plotLines:b,dateTimeLabelFormats:{day:"%d %b",week:"%d %b",month:"%b<br/>%Y",year:"%Y"}},yAxis:[{title:{text:"Cumulative GDD",style:{"font-size":"14px",color:"#000000"}},min:0,gridZIndex:1,labels:{style:{color:"#000000"}}},{title:{text:"First/Last Freeze (# yrs)",align:"low",style:{"font-size":"14px",color:"#0000FF"}},min:0,max:8,visible:e.freezeIsEnabled,labels:{style:{color:"#0000FF"}},opposite:!0}],series:[{name:"Season to Date",data:e.chartWeatherData.gdd_ytd_selected.slice(0,t).map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_selected_year[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:24,lineWidth:2,color:"#00dd00",shadow:!1,marker:{enabled:!0,fillColor:"#00dd00",lineWidth:2,lineColor:"#00dd00",radius:2,symbol:"circle"}},{name:"6 Day Forecast",data:e.chartWeatherData.gdd_ytd_selected.slice(t).map((function(a,n){return[_.a.utc(e.chartWeatherData.dates_selected_year[t+n],"YYYY-MM-DD").valueOf(),a]})),showInLegend:r,type:"line",zIndex:24,lineWidth:2,color:"#dd0000",shadow:!1,marker:{enabled:!0,fillColor:"#dd0000",lineWidth:2,lineColor:"#dd0000",radius:2,symbol:"circle"}},{name:"15 Year Average",data:e.chartWeatherData.gdd_ytd_15yr_ave.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:23,lineWidth:2,color:"#0000ff",marker:{enabled:!1,states:{hover:{enabled:!1}}}},{name:'30 Year "Normal"',data:e.chartWeatherData.gdd_ytd_30yr_nor.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),t]})),type:"line",zIndex:22,lineWidth:2,color:"#B041FF",marker:{enabled:!1,states:{hover:{enabled:!1}}}},{name:"Period of Record",data:e.chartWeatherData.gdd_ytd_por_min.map((function(t,a){return[_.a.utc(e.chartWeatherData.dates_for_summary[a],"YYYY-MM-DD").valueOf(),e.chartWeatherData.gdd_ytd_por_min[a],e.chartWeatherData.gdd_ytd_por_max[a]]})),type:"arearange",showInLegend:!0,zIndex:10,lineWidth:2,color:"#444444",fillColor:"#eeeeee",fillOpacity:.1,marker:{enabled:!1,states:{hover:{enabled:!1}},symbol:"square",lineWidth:2,lineColor:"#444444",radius:12}},{name:"First/Last Freezes (last 15 yrs)",type:"column",pointWidth:1,borderWidth:0,zIndex:"season-outlook"===e.view?1:25,visible:e.freezeIsEnabled,yAxis:1,showInLegend:e.freezeIsEnabled,enableMouseTracking:!1,data:l.concat(c)}]}}),e.dataIsLoading&&Object(L.jsx)(le.a,{style:{zIndex:1e3},invisible:!0,open:e.dataIsLoading,children:Object(L.jsx)(ce.a,{size:200,color:"primary"})})]})},he=a(217),ue=a(115),pe=a(21),be=a(215),fe=Object(p.a)((function(e){return{}}))((function(e){return Object(L.jsx)(pe.a,{utils:ue.a,children:Object(L.jsx)(be.a,{disableToolbar:!0,views:["date"],variant:"inline",format:"MM/dd/yyyy",minDate:"01/01/1980",maxDate:"12/31/2022",PopoverProps:{style:Object(g.a)({},{left:"180px",top:"-140px"})},margin:"normal",id:"date-picker-inline",label:"Planting Date",value:e.value,onChange:e.onchange,autoOk:!0,InputProps:{readOnly:!0},KeyboardButtonProps:{"aria-label":"change planting date"},style:{width:160}})})})),je=a(218),me=a(211),ge=a(226),Oe=a(227),xe=function(e){return e+"\xb0F"},ye=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:160},menuPaper:{maxHeight:190,backgroundColor:j.a[600],color:"#ffffff"}}}))((function(e){var t=e.classes;return Object(L.jsx)("form",{className:t.root,autoComplete:"off",children:Object(L.jsxs)(me.a,{className:t.formControl,children:[Object(L.jsx)(ge.a,{htmlFor:"gdd_base",children:"GDD Base"}),Object(L.jsx)(je.a,{value:e.value,onChange:e.onchange,margin:"normal",MenuProps:{classes:{paper:t.menuPaper}},inputProps:{name:"gdd_base",id:"gdd_base"},children:e.values&&e.values.map((function(e,t){return Object(L.jsx)(Oe.a,{value:e,children:xe(e)},t)}))})]})})})),ve=a(225),De=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:100,maxWidth:120}}}))((function(e){var t=e.classes;return Object(L.jsx)("form",{className:t.root,autoComplete:"off",children:Object(L.jsx)(me.a,{className:t.formControl,children:Object(L.jsx)(ve.a,{fullWidth:!0,color:"primary",label:"GDD Target",margin:"none",value:e.value,disabled:!e.enabled,onChange:e.onchange,inputProps:{name:"gdd_target",id:"gdd_target"}})})})})),_e=a(220),Ce=a(78),we=a(212),Ie=Object(p.a)({root:{color:Ce.a[600],"&$checked":{color:Ce.a[800]}},checked:{}})((function(e){return Object(L.jsx)(_e.a,Object(g.a)({color:"default"},e))})),ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsx)(we.a,{control:Object(L.jsx)(Ie,{checked:this.props.value,onChange:this.props.onchange,name:"enableTarget"}),label:""})}}]),a}(n.Component),Ye=Object(p.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:100,maxWidth:120}}}))((function(e){var t=e.classes;return Object(L.jsx)("form",{className:t.root,autoComplete:"off",children:Object(L.jsx)(me.a,{className:t.formControl,children:Object(L.jsx)(ve.a,{fullWidth:!0,color:"primary",label:"Frost Temp (\xb0F)",margin:"none",value:e.value,disabled:!e.enabled,onChange:e.onchange,inputProps:{name:"freeze_threshold",id:"freeze_threshold"}})})})})),Me=Object(p.a)({root:{color:Ce.a[600],"&$checked":{color:Ce.a[800]}},checked:{}})((function(e){return Object(L.jsx)(_e.a,Object(g.a)({color:"default"},e))})),Se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsx)(we.a,{control:Object(L.jsx)(Me,{checked:this.props.value,onChange:this.props.onchange,name:"enableTarget"})})}}]),a}(n.Component),Fe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsx)(he.a,{padding:2,border:0,borderRadius:4,borderColor:"primary.main",children:Object(L.jsx)(x.a,{container:!0,item:!0,direction:"column",spacing:3,children:Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(L.jsx)(x.a,{item:!0,children:Object(L.jsx)(fe,{value:this.props.locations[this.props.selected].planting_date,onchange:this.props.onchange_plantingDate})}),Object(L.jsx)(x.a,{item:!0,children:Object(L.jsx)(ye,{value:this.props.locations[this.props.selected].gdd_base,values:this.props.gdd_list,onchange:this.props.onchange_locInfo})}),Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"flex-end",children:[Object(L.jsx)(ke,{value:this.props.targetIsEnabled,onchange:this.props.onchange_targetIsEnabled}),Object(L.jsx)(De,{value:this.props.locations[this.props.selected].gdd_target,enabled:this.props.targetIsEnabled,onchange:this.props.onchange_locInfo})]}),Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"flex-end",children:[Object(L.jsx)(Se,{value:this.props.freezeIsEnabled,onchange:this.props.onchange_freezeIsEnabled}),Object(L.jsx)(Ye,{value:this.props.locations[this.props.selected].freeze_threshold,enabled:this.props.freezeIsEnabled,onchange:this.props.onchange_locInfo})]})]})})})}}]),a}(r.a.Component),We=a(113),Le=a.n(We),Ee=a(223),ze=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.anchorEl,t=Boolean(e);return Object(L.jsxs)("div",{children:[Object(L.jsxs)(v.a,{variant:"text",color:"secondary",size:"small",onClick:this.handleClick,children:[Object(L.jsx)(Le.a,{}),"Select chart details"]}),Object(L.jsx)(Ee.a,{id:"simple-popper",open:t,anchorEl:e,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object(L.jsx)(he.a,{paddingTop:1,border:2,borderRadius:4,borderColor:"primary.main",children:this.props.content})})]})}}]),a}(r.a.Component),Te=Object(p.a)((function(e){return{typography:{margin:e.spacing(2)}}}))(ze),Ae=function(){return Object(L.jsxs)(he.a,{maxWidth:800,padding:1,border:1,borderRadius:4,borderColor:"primary.main",bgcolor:"#f5f5dc",children:[Object(L.jsx)("h2",{children:"Data Sources and methods"}),Object(L.jsxs)("h4",{children:[Object(L.jsx)("br",{}),"\u2022 ABOUT THE GROWING DEGREE DAY CALCULATOR"]}),Object(L.jsx)("p",{children:"This tool plots Growing Degree Days (GDD), also called Growing Degree Units (GDUs), which measure heat accumulation in order to predict plant and insect development. In a stress-free environment, the development rate of a plant is dependent on temperature. Using the expected temperature of the summer season, based on previous years, this tool can help predict the best days to plant, harvest, and fertilize."}),Object(L.jsx)("p",{children:"GDDs are calculated by taking the average of the daily maximum and minimum air temperature, and then subtracting a base temperature. The base temperature is the lowest temperature at which a crop will grow."}),Object(L.jsxs)("h4",{children:[Object(L.jsx)("br",{}),"\u2022 COMMON BASE TEMPERATURES USED FOR GDD CALCULATION"]}),Object(L.jsx)("p",{children:"50\xb0F is the most common base for GDD calculations. However, a number of other bases are used depending on the lifecycle of the plant or insect of interest. Here is a small sample:"}),Object(L.jsxs)("ul",{children:[Object(L.jsx)("i",{children:"Plants"}),Object(L.jsx)("li",{children:"50\xb0F : corn, sorghum, soybeans, tomato"}),Object(L.jsx)("li",{children:"46\xb0F : sunflower, potato"}),Object(L.jsx)("li",{children:"42\xb0F : wheat, barley, rye, oats, flaxseed, lettuce, asparagus"})]}),Object(L.jsxs)("ul",{children:[Object(L.jsx)("i",{children:"Insects and Diseases"}),Object(L.jsx)("li",{children:"52\xb0F : Green Cloverworm"}),Object(L.jsx)("li",{children:"50\xb0F : Codling moth, Apple maggot"}),Object(L.jsx)("li",{children:"48\xb0F : Alfalfa weevil"}),Object(L.jsx)("li",{children:"45\xb0F : Corn rootworm, Oriental fruit moth"}),Object(L.jsx)("li",{children:"43\xb0F : Stalk Borer"}),Object(L.jsx)("li",{children:"40\xb0F : Onion maggot"}),Object(L.jsx)("li",{children:"39\xb0F : Cabbage maggot"}),Object(L.jsx)("li",{children:"32\xb0F : Apple scab"})]}),Object(L.jsx)("h4",{children:"\u2022 AIR TEMPERATURE DATA"}),Object(L.jsxs)("p",{children:["The 2.5 x 2.5 mile gridded dataset of maximum and minimum air temperatures is produced daily for the Northeast United States by the ",Object(L.jsx)("a",{href:"http://www.nrcc.cornell.edu",target:"_blank",rel:"noopener noreferrer",children:"Northeast Regional Climate Center"}),", using methods described in Degaetano and Belcher (2007). These data are available for use through the Applied Climate Information System (",Object(L.jsx)("a",{href:"http://www.rcc-acis.org",target:"_blank",rel:"noopener noreferrer",children:"ACIS"}),") web service."]}),Object(L.jsx)("p",{children:"Degaetano, A.T. and B.N. Belcher. (2007). Spatial Interpolation of Daily Maximum and Minimum Air Temperature Based on Meteorological Model Analyses and Independent Observations. Journal of Applied Meteorology and Climatology. 46."}),Object(L.jsx)("h4",{children:"\u2022 FORECASTS AND OUTLOOKS"}),Object(L.jsx)("p",{children:"Six-day forecasts of daily temperature extremes obtained through the National Weather Service's National Digital Forecast Database (Glahn and Ruth, 2003) provide the means to produce 6-day GDD forecasts."}),Object(L.jsx)("p",{children:"Seasonal outlooks are produced based on historical observations over recent decades. Minimum, maximum and average observed GDD accumulation over previous seasons provide expected guidelines and reference points based on what has occurred at a specific location in the past."}),Object(L.jsx)("p",{children:"Glahn, H. R., and D. P. Ruth, 2003: The new digital forecast database of the National Weather Service. Bull. Amer. Meteor. Soc., 84, 195\u2013201."})]})},Pe=a(208),Re=a(114),Ne=a.n(Re),Ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t);return Object(L.jsxs)("div",{children:[Object(L.jsx)(Pe.a,{color:"inherit","aria-label":"Help",className:e.menuButton,onClick:this.handleClick,children:Object(L.jsx)(Ne.a,{})}),Object(L.jsx)(Ee.a,{id:"simple-popper",open:a,anchorEl:t,onClick:this.handleClose,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:this.props.content})]})}}]),a}(r.a.Component),Be=Object(p.a)((function(e){return{typography:{margin:e.spacing(2)},menuButton:{marginRight:-60,marginTop:-10}}}))(Ge);function Ue(e,t,a,n,r){var o={},i=function(e,t,a){var n;function r(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n){var r=n[0],o=n[1];e=e>r?r:e,t=t<o?o:t}return Math.max.apply(Math,[(e+t)/2-a,0])}var o=t.slice(0,2)+"-"+t.slice(3,5),i="86/50"===a?50:a,s="86/50"===a?[86,50]:null;return e.map((n=0,function(e){return[e[0],e[0].slice(5)===o?n=r(e[1],e[2],i,s):n+=r(e[1],e[2],i,s)]}))}(function(e){return e.map((function(e){return[(t=e[0],_()(t,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD")),e[1],e[2]];var t})).slice(1)}(e),a,n);return o=Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)({},o),function(e,t){var a=t.slice(6,10)+"-"+t.slice(0,2)+"-"+t.slice(3,5),n=t.slice(6,10),r=null;return{dates_selected_year:(r=e.filter((function(e,t,r){return e[0].split("-")[0]===n&&a<=e[0]}))).map((function(e){return e[0]})),gdd_ytd_selected:r.map((function(e){return-999!==e[1]?e[1]:null}))}}(i,a)),function(e,t){var a=t.slice(6,10)+"-"+t.slice(0,2)+"-"+t.slice(3,5),n=t.slice(6,10),r=_()().format("YYYY"),o=_()([n]).isLeapYear(),i=null,s=null,c=[],l=[],d=[],h=[],u=[],p=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length};function b(e,t,a){return e[0].slice(5)===this}return i=e.filter((function(e,t,n){var o=e[0].split("-")[0]!==r,i=a.slice(5)<=e[0].slice(5);return o&&i})),(s=Object(O.a)(new Set(i.map((function(e){return e[0].slice(5)}))))).sort(),s.forEach((function(e){if("02-29"!==e||o){var t=i.filter(b,e).map((function(e){return e[1]}));c.push(n+"-"+e),l.push(Math.max.apply(Math,Object(O.a)(t))),d.push(Math.min.apply(Math,Object(O.a)(t))),h.push(p(t.slice(-15))),u.push(p(t.slice(1991-parseInt(r,10),2020-parseInt(r,10))))}})),{dates_for_summary:c,gdd_ytd_por_max:l,gdd_ytd_por_min:d,gdd_ytd_15yr_ave:h,gdd_ytd_30yr_nor:u}}(i,a)),function(e,t,a){if(!a)return{datesOfFirstFreeze_15yr:[],datesOfLastFreeze_15yr:[]};for(var n,r,o,i,s=t.slice(6,10),c=_()().format("YYYY"),l=[],d=[],h=[],u=e.map((function(e){return e[0]})),p=1;p<16;p++)l.push(parseInt(c,10)-p);function b(e,t,n){return e[2]<=parseInt(a,10)}return(n=l.map((function(e){return e.toString()+"-06-30"}))).sort(),n.forEach((function(t){r=u.indexOf(t),(o=e.slice(r-180,r).filter(b)).length>0?h.push(o.slice(-1)[0][0]):h=[],(i=e.slice(r,r+180).filter(b)).length>0?d.push(i[0][0]):d=[]})),d=d.map((function(e){return s+e.slice(4)})),h=h.map((function(e){return s+e.slice(4)})),d.length>0&&d.sort(),h.length>0&&h.sort(),{datesOfFirstFreeze_15yr:d,datesOfLastFreeze_15yr:h}}(e,a,r)),function(e){return{firstFcstDate:e}}(t))}var He=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addOneDayToStringDate=function(e){return _()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")},n.subtractOneDayToStringDate=function(e){return _()(e,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD")},n.loadAllData=function(){n.handleDataIsLoadingChange(!0),setTimeout((function(){Z({param:n.getAcisParamsObs()}).then((function(e){var t=e.data,a=(t=t.filter((function(e){return-999!==e[1]&&-999!==e[2]}))).slice(-1)[0][0];X({param:n.getAcisParamsFcst(a)}).then((function(e){var r,o,i=[];"dlyData"in e&&(r=i).push.apply(r,Object(O.a)(e.dlyData.map((function(e){return[n.addOneDayToStringDate(e[0].split("T")[0]),parseInt(e[2],10),parseInt(e[3],10)]}))));"dlyFcstData"in e&&(o=i).push.apply(o,Object(O.a)(e.dlyFcstData.map((function(e){return[n.addOneDayToStringDate(e[0].split("T")[0]),parseInt(e[1],10),parseInt(e[2],10)]}))));i=i.filter((function(e){return e[0]>a}));var s={data:t.concat(i),last_obs_date:a};n.handleDataChange(s),n.handleDataIsLoadingChange(!1)}))}))}),1e3)},n.getAcisParamsObs=function(){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loc:[n.state.locations[n.state.selected].lng,n.state.locations[n.state.selected].lat].join(),sdate:"1980-01-01",edate:_()().format("YYYY-MM-DD"),grid:"nrcc-model",elems:[{name:"maxt",interval:[0,0,1]},{name:"mint",interval:[0,0,1]}]})}},n.getAcisParamsFcst=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:n.state.locations[n.state.selected].lat,lon:n.state.locations[n.state.selected].lng,tzo:-5,sdate:e.replaceAll("-","")+"00",edate:"now"})}},n.handleSelectedLocationChange=function(e){n.setState({selected:e})},n.handleLocationInfoChange=function(e){var t=e.target.name,a=e.target.value;n.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{locations:Object(g.a)(Object(g.a)({},e.locations),Object(m.a)({},e.selected,Object(g.a)(Object(g.a)({},e.locations[e.selected]),{},Object(m.a)({},t,a))))})}))},n.handleLocationPickerOutput=function(e,t){var a={};for(var r in t)t.hasOwnProperty(r)&&(n.state.locations.hasOwnProperty(r)?a[r]=Object(g.a)(Object(g.a)(Object(g.a)({},n.defaultLocation),n.state.locations[r]),t[r]):a[r]=Object(g.a)(Object(g.a)({},n.defaultLocation),t[r]));n.setState({locations:a,selected:e})},n.handleDataChange=function(e){n.setState({pointData:e})},n.handleViewChange=function(e){n.setState({view:e})},n.handleDataIsLoadingChange=function(e){n.setState({dataIsLoading:e})},n.handlePlantingDateChange=function(){var e={target:{name:"planting_date",value:arguments.length<=1?void 0:arguments[1]}};n.handleLocationInfoChange(e)},n.handleTargetIsEnabledChange=function(){n.setState((function(e){return{targetIsEnabled:!e.targetIsEnabled}}))},n.handleFreezeIsEnabledChange=function(){n.setState((function(e){return{freezeIsEnabled:!e.freezeIsEnabled}}))},n.toolName="CSF-GDDTOOL",n.token="pk.eyJ1IjoiYm5iMiIsImEiOiJjazJtYTgwajQwZnFiM29waGo4NHI1MWpnIn0.Xmb6eYeJArqqBQtKkWorUQ",n.bbox={north:47.53,south:37.09,east:-66.89,west:-82.7542},n.allowedStates=["Maine","New Hampshire","Vermont","Rhode Island","Massachusetts","Connecticut","New York","New Jersey","Pennsylvania","Delaware","Maryland","West Virginia","Ohio","Virginia","Kentucky"],n.gdd_list=["86/50","50","49","48","47","46","45","44","43","42","41","40","39","38","37","36","35","34","33","32"],n.defaultLocation={address:"Cornell University, Ithaca, NY",lat:42.45,lng:-76.48,id:"default",planting_date:"01/01/2022",gdd_base:"50",gdd_target:"1500",freeze_threshold:"32"},n.defaultLocations={default:n.defaultLocation},n.state={locations:w()(n.toolName+".locations")||n.defaultLocations,selected:w()(n.toolName+".selected")||n.defaultLocation.id,pointData:null,dataIsLoading:!1,targetIsEnabled:!1,freezeIsEnabled:!1,view:"season-outlook"},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.state.locations&&this.state.selected&&this.loadAllData()}},{key:"componentDidUpdate",value:function(e,t){t.selected!==this.state.selected&&this.loadAllData(),t.locations!==this.state.locations&&w.a.set(this.toolName+".locations",this.state.locations),t.selected!==this.state.selected&&w.a.set(this.toolName+".selected",this.state.selected)}},{key:"render",value:function(){var e,t,a=this;return this.state.pointData&&(e=Object(L.jsx)(de,{locInfo:this.state.locations[this.state.selected],freezeIsEnabled:this.state.freezeIsEnabled,targetIsEnabled:this.state.targetIsEnabled,chartWeatherData:Ue(this.state.pointData.data,this.state.pointData.last_obs_date,this.state.locations[this.state.selected].planting_date,this.state.locations[this.state.selected].gdd_base,this.state.locations[this.state.selected].freeze_threshold),view:this.state.view,dataIsLoading:this.state.dataIsLoading})),t=Object(L.jsx)(Fe,{locations:this.state.locations,selected:this.state.selected,view:this.state.view,targetIsEnabled:this.state.targetIsEnabled,freezeIsEnabled:this.state.freezeIsEnabled,gdd_list:this.gdd_list,mapbox_token:this.token,onchange_locationPicker:this.handleLocationPickerOutput,onchange_view:this.handleViewChange,onchange_plantingDate:this.handlePlantingDateChange,onchange_locInfo:this.handleLocationInfoChange,onchange_targetIsEnabled:this.handleTargetIsEnabledChange,onchange_freezeIsEnabled:this.handleFreezeIsEnabledChange}),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(x.a,{container:!0,direction:"column",justify:"center",spacing:2,children:[Object(L.jsx)(x.a,{item:!0,children:Object(L.jsx)(B,{locations:this.state.locations,selected:this.state.selected,newLocationsCallback:this.handleLocationPickerOutput,token:this.token,modalZIndex:150})}),Object(L.jsx)(x.a,{item:!0}),Object(L.jsxs)(x.a,{container:!0,direction:"row",justify:"stretch",children:[Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"column",justify:"top",spacing:1,md:!0,children:[Object(L.jsx)(y.a,{mdUp:!0,children:Object(L.jsx)(x.a,{item:!0,children:Object(L.jsx)(Te,{content:t})})}),Object(L.jsx)(y.a,{smDown:!0,children:Object(L.jsx)(x.a,{item:!0,children:t})})]}),Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:1,md:9,children:[Object(L.jsx)(x.a,{item:!0,style:{width:"100%",height:"70vh"},children:this.state.pointData&&e}),Object(L.jsxs)(x.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(L.jsx)(x.a,{item:!0,children:this.state.pointData&&Object(L.jsx)(v.a,{variant:"season-to-date"===this.state.view?"contained":"outlined",color:"primary",size:"small",onClick:function(){return a.handleViewChange("season-to-date")},children:"Season To Date"})}),Object(L.jsx)(x.a,{item:!0,children:this.state.pointData&&Object(L.jsx)(v.a,{variant:"season-outlook"===this.state.view?"contained":"outlined",color:"primary",size:"small",onClick:function(){return a.handleViewChange("season-outlook")},children:"Season Outlook"})}),Object(L.jsx)(x.a,{item:!0,children:this.state.pointData&&Object(L.jsx)(Be,{content:Object(L.jsx)(Ae,{})})})]})]})]})]})})}}]),a}(n.Component),Je=Object(h.a)({shadows:Array(25).fill("none"),palette:{primary:{main:j.a[800]},alternativeTextColor:j.a[800]},overrides:{MUIDataTableBodyRow:{root:{"&:nth-child(odd)":{backgroundColor:"#D3D3D3"}}}},typography:{body2:{fontSize:"0.8rem","@media (min-width:960px)":{fontSize:"1.0rem"}}}}),Ve=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(L.jsx)(u.a,{theme:Je,children:Object(L.jsx)("div",{id:"container",className:"App",children:Object(L.jsx)(He,{})})})}}]),a}(n.Component),Ze=Object(p.a)((function(e){return{root:{}}}))(Object(b.a)(Ve));i.a.render(Object(L.jsx)(Ze,{}),document.getElementById("csftool-content"))}},[[176,1,2]]]);
//# sourceMappingURL=main.48892ca9.chunk.js.map