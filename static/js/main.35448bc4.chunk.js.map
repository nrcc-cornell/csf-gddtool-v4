{"version":3,"sources":["components/LocationPicker/Markers.js","components/LocationPicker/Map.js","components/LocationPicker/MapBar.js","components/LocationPicker/LocationPicker.js","components/LoadPointData.js","components/LoadPointDataFcst.js","components/DisplayChart.js","components/UI/PlantingDatePicker.js","components/UI/GddBaseSelect.js","components/UI/GddTargetSelect.js","components/UI/GddTargetSelectEnable.js","components/UI/FreezeThreshSelect.js","components/UI/FreezeThreshSelectEnable.js","components/UI/UserInput.js","components/VarPopover.js","components/HelpToolContent.js","components/HelpToolPopover.js","components/processWeatherData.js","components/ToolContents.js","components/App.js","index.js"],"names":["Markers","props","Object","keys","pastLocations","map","key","loc","isSelected","id","currentLocation","longitude","lng","latitude","lat","onClick","e","onMarkerClick","style","zIndex","top","className","onMouseEnter","onMarkerMouseEnter","onMouseLeave","onMarkerMouseLeave","onContextMenu","onMarkerRightClick","address","roundXDigits","number","digits","parseFloat","res","Math","round","pow","toFixed","getLocation","token","states","fetch","method","then","response","json","region","features","context","find","c","split","includes","text","Error","place_name","replace","catch","calcInitBounds","locations","minLat","Infinity","maxLat","minLng","maxLng","values","forEach","adjustment","MapComp","mapboxgl","accessToken","useState","popup","setPopup","bounds","fitBoundsOptions","padding","bottom","left","right","viewState","setViewState","handleMapClick","a","lngLat","bbox","west","east","south","north","allowedStates","newLocation","mapRef","current","handleChangeLocations","flyTo","center","speed","essential","ref","mapStyle","boxZoom","dragRotate","touchPitch","doubleClickZoom","attributionControl","onMove","evt","view","prev","newContent","originalEvent","stopPropagation","closeOnClick","closeButton","onClose","offset","window","navigator","maxTouchPoints","MapBar","setAddress","handleSearch","join","jData","reduce","acc","feat","type","place_type","slice","city","console","log","onChange","target","value","onKeyDown","handleClose","defaultBBox","defaultLocation","LocationPicker","modalOpen","setModalOpen","height","setHeight","length","setPastLocations","selected","currentId","setCurrentId","useRef","useEffect","setTimeout","closeModal","newLocationsCallback","action","location","String","Date","now","newLocs","modalZIndex","opacity","onMouseDown","protocol","LoadPointData","param","r","data","propTypes","PropTypes","object","isRequired","LoadPointDataFcst","HighchartsMore","Highcharts","Exporting","ExportData","DisplayCharts","idxOfFirstFcstDate","currentYear","moment","format","plantingYear","chartWeatherData","dates_for_summary","fcstIsShowing","dates_selected_year","firstFcstDate","indexOf","i","countOfThisDate","countItemInArray","item","arr","count","dataForFirstFreeze","datesOfFirstFreeze_15yr","push","x","utc","valueOf","y","color","dataForLastFreeze","datesOfLastFreeze_15yr","tooltipFormatter","header","dateFormat","this","tips","points","series","name","point","low","high","targetInfo","year","locInfo","crosshair_zindex","gdd_ytd_por_min","plotLines","targetIsEnabled","idxOfTarget","idxOfMaxObsValue","result","label","gdd_ytd_selected","max","findIndex","gdd_ytd_15yr_ave","getTargetDate","width","containerProps","highcharts","options","plotOptions","line","animation","lineWidth","marker","symbol","hover","enabled","halo","size","exporting","menuItemDefinitions","downloadCSV","downloadXLS","buttons","contextButton","menuItems","chart","marginTop","backgroundColor","credits","href","title","subtitle","tooltip","useHtml","shared","borderColor","borderWidth","borderRadius","shadow","xDateFormat","positioner","shape","crosshairs","snap","formatter","legend","align","symbolRadius","floating","verticalAlign","layout","xAxis","startOnTick","endOnTick","min","labels","dateTimeLabelFormats","day","week","month","yAxis","gridZIndex","visible","freezeIsEnabled","opposite","index","fillColor","lineColor","radius","showInLegend","gdd_ytd_30yr_nor","gdd_ytd_por_max","fillOpacity","pointWidth","enableMouseTracking","concat","dataIsLoading","Backdrop","invisible","open","CircularProgress","withStyles","theme","utils","DateFnsUtils","disableToolbar","views","variant","minDate","maxDate","PopoverProps","margin","onchange","autoOk","InputProps","readOnly","KeyboardButtonProps","getLabel","v","root","display","flexWrap","formControl","minWidth","menuPaper","maxHeight","green","classes","autoComplete","FormControl","InputLabel","htmlFor","Select","MenuProps","paper","inputProps","MenuItem","maxWidth","TextField","fullWidth","disabled","GreenCheckbox","checked","Checkbox","GddTargetSelectEnable","FormControlLabel","control","Component","FreezeThreshSelectEnable","UserInput","Box","border","Grid","container","direction","spacing","justify","alignItems","onchange_plantingDate","gdd_list","onchange_locInfo","onchange_targetIsEnabled","onchange_freezeIsEnabled","React","VarPopover","state","anchorEl","handleClick","event","setState","currentTarget","Boolean","Button","Popover","anchorOrigin","vertical","horizontal","transformOrigin","paddingTop","content","typography","HelpMain","bgcolor","rel","HelpToolPopover","IconButton","aria-label","menuButton","marginRight","processWeatherData","dataDailyExtremes","lastObsDate","plantingDate","gddBase","freezeThreshold","results","sum","calcGdd","mx","mn","b","limits","mx_lim","mn_lim","startDateMMDD","base","calcGddAcc","d","subtract","shiftDataBackOneDay","plantingDateFormatted","selectedYear","dataFiltered","filter","array","getSelectedYearData","isLeapYearSelected","isLeapYear","distinctDates","average","p","isOnDate","isNotCurrentYear","isAfterPlantingDate","Set","sort","dataToSummarizeForDate","parseInt","getExtremesAndAverageData","seasonStartDates","idxOfDate","springFreezes","fallFreezes","years","dates","isBelowFreezeThreshold","toString","getFreezeData","getFirstFcstDate","ToolContents","addOneDayToStringDate","add","subtractOneDayToStringDate","loadAllData","handleDataIsLoadingChange","getAcisParamsObs","response_obs","data_obs","last_obs_date","getAcisParamsFcst","response_fcst","data_fcst","handleDataChange","headers","body","JSON","stringify","sdate","replaceAll","handleSelectedLocationChange","handleLocationInfoChange","k","prevState","handleLocationPickerOutput","s","l","l_new","hasOwnProperty","pointData","handleViewChange","handlePlantingDateChange","e_new","handleTargetIsEnabledChange","handleFreezeIsEnabledChange","toolName","defaultLocations","ls","prevProps","set","display_DisplayChart","display_UserInput","DisplayChart","mapbox_token","onchange_locationPicker","onchange_view","md","Hidden","mdUp","smDown","createMuiTheme","shadows","Array","fill","palette","primary","main","alternativeTextColor","overrides","MUIDataTableBodyRow","body2","fontSize","App","withTheme","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.35448bc4.chunk.js","sourcesContent":["import React from 'react';\nimport { Marker } from 'react-map-gl';\n\n\n\nexport default function Markers(props) {\n  return <>\n    {Object.keys(props.pastLocations).map(key => {\n      const loc = props.pastLocations[key];\n      const isSelected = loc.id === props.currentLocation.id;\n          \n      return (\n        <Marker\n          key={loc.address}\n          longitude={loc.lng}\n          latitude={loc.lat}\n          onClick={(e) => props.onMarkerClick(e, loc)}\n          style={{ zIndex: isSelected ? 2 : 1, top: -20 }}\n        >\n          <div\n            className={isSelected ? 'loc-curr-marker' : 'loc-marker'}\n            onMouseEnter={() => props.onMarkerMouseEnter({ ...loc, isSelected })}\n            onMouseLeave={props.onMarkerMouseLeave}\n            onContextMenu={() => props.onMarkerRightClick(loc, isSelected)}\n          ></div>\n        </Marker>\n      );\n    })}\n  </>;\n}","import React, { useState } from 'react';\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport mapboxgl from 'mapbox-gl';\nimport Map, { Popup } from 'react-map-gl';\n\nimport Markers from './Markers';\n\n\n// Takes a number or string to round and a number for digits to round to, returns a rounded number\nfunction roundXDigits( number, digits ) {\n  if (typeof number === 'string') {\n    number = parseFloat(number);\n  }\n  \n  const res = (Math.round( Math.round( number * Math.pow(10, digits + 1) ) / 10 ) / Math.pow(10, digits)).toFixed(digits);\n  \n  return parseFloat(res);\n}\n\n// Determines if user device is a touchscreen device, returns boolean\nfunction isTouchDevice() {\n  return (('ontouchstart' in window) ||\n     (navigator.maxTouchPoints > 0));\n}\n\n// Gets the address name for a set of coordinates if it is within the list of allowed states\nfunction getLocation( lng, lat, token, states ) {\n  return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${lng},${lat}.json?limit=1&access_token=${token}`, { method: 'GET' })\n    .then(response => response.json())\n    .then((res) => {\n      // Gets the state name\n      const region = res.features[0].context.find((c) => c.id.split('.')[0] === 'region');\n      \n      // If no state name or state is outside scope, reject it\n      if (states && !states.includes(region.text)) throw new Error('Out of Bounds');\n\n      // Construct user friendly address\n      const address = res.features[0].place_name.replace(', United States', '').replace(/\\s\\d{5}/g, '');\n\n      return {\n        address,\n        lng,\n        lat\n      };\n    })\n    .catch(() => false);\n}\n\n// Uses all past locations to find the bounding coordinates for the initial map view\nfunction calcInitBounds(locations) {\n  let minLat = Infinity, maxLat = -Infinity, minLng = Infinity, maxLng = -Infinity;\n  Object.values(locations).forEach(loc => {\n    if (loc.lat > maxLat) maxLat = loc.lat;\n    if (loc.lat < minLat) minLat = loc.lat;\n    if (loc.lng > maxLng) maxLng = loc.lng;\n    if (loc.lng < minLng) minLng = loc.lng;\n  });\n\n\n  // If only one location is present, adjust the coordinates to reduce initial zoom\n  const adjustment = 0.1\n  if (minLat === maxLat) {\n    minLat -= adjustment;\n    maxLat += adjustment;\n  }\n\n  if (minLng === maxLng) {\n    minLng -= adjustment;\n    maxLng += adjustment;\n  }\n\n  return [minLng, minLat, maxLng, maxLat];\n}\n\n\n\nexport default function MapComp(props) {\n  // Set token for mapbox API\n  mapboxgl.accessToken = props.token;\n\n  const [popup, setPopup] = useState(null);\n  const [viewState, setViewState] = useState({\n    bounds: calcInitBounds(props.pastLocations),\n    fitBoundsOptions: {\n      padding: {\n        top: 100,\n        bottom: 10,\n        left: 15,\n        right: 15\n      }\n    }\n  });\n\n\n  // Limits panning to bbox coordinates\n  const handlePanning = (view) => {\n    if (view.latitude > props.bbox.north || view.latitude < props.bbox.south) {\n      view.latitude = viewState.latitude;\n    }\n\n    if (view.longitude > props.bbox.east || view.longitude < props.bbox.west) {\n      view.longitude = viewState.longitude;\n    }\n\n    setViewState(prev => {\n      return {\n        ...prev,\n        ...view\n      };\n    });\n  };\n\n  // Changes selected location\n  const handleMarkerClick = (e, loc) => {\n    e.originalEvent.stopPropagation();\n    props.handleChangeLocations('change', loc);\n  };\n\n  // Removes locations\n  const handleMarkerRightClick = (loc, isSelected) => {\n    if (!isSelected) {\n      props.handleChangeLocations('remove', loc);\n      setPopup(null);\n    }\n  };\n\n  // Opens popup for location on hover\n  const handleMarkerMouseEnter = (newContent) => {\n    setPopup(newContent);\n  };\n\n  // Closes popup for location\n  const handleMarkerMouseLeave = () => {\n    setPopup(null);\n  };\n\n  // Gets new location information on map click if the clicked location is within given bbox and state list\n  const handleMapClick = async (e) => {\n    const lng = e.lngLat.lng;\n    const lat = e.lngLat.lat;\n\n    if (lng >= props.bbox.west && lng <= props.bbox.east && lat >= props.bbox.south && lat <= props.bbox.north) {\n      const newLocation = await getLocation(lng, lat, props.token, props.allowedStates);\n  \n      if (newLocation && props.mapRef.current) {\n        props.handleChangeLocations('add', newLocation);\n        props.mapRef.current.flyTo({\n          center: [newLocation.lng, newLocation.lat],\n          speed: 0.8,\n          essential: true\n        });\n      }\n    }\n  };\n\n\n  return (\n    <div id='loc-map'>\n      <Map\n        {...viewState}\n        ref={props.mapRef}\n        mapStyle='mapbox://styles/mapbox/satellite-streets-v11'\n        boxZoom={false}\n        dragRotate={false}\n        touchPitch={false}\n        doubleClickZoom={false}\n        attributionControl={false}\n        onMove={evt => handlePanning(evt.viewState)}\n        onClick={handleMapClick}\n      >\n        <Markers\n          currentLocation={props.currentLocation}\n          pastLocations={props.pastLocations}\n          onMarkerMouseEnter={handleMarkerMouseEnter}\n          onMarkerMouseLeave={handleMarkerMouseLeave}\n          onMarkerClick={handleMarkerClick}\n          onMarkerRightClick={handleMarkerRightClick}\n        />\n\n        {\n          popup && <Popup\n            longitude={popup.lng}\n            latitude={popup.lat}\n            closeOnClick={false}\n            closeButton={false}\n            onClose={() => setPopup(null)}\n            offset={{\n              'center': [0, 0],\n              'left': [12, 0],\n              'right': [-12, 0],\n              'top': [0, -6],\n              'top-left': [10, 3],\n              'top-right': [-20, 3],\n              'bottom': [0, -16],\n              'bottom-left': [10, -12],\n              'bottom-right' : [-20, -12]\n            }}\n            style={{ zIndex: 4 }}\n          >\n            <h3>{popup.address}</h3>\n            <h4>Coordinates: {roundXDigits(popup.lng, 5)}, {roundXDigits(popup.lat, 5)}</h4>\n            {\n              popup.isSelected ? '' : <>\n                <h5>Click to Use</h5>\n                {isTouchDevice() ? \n                  <h5>Click and Hold to Remove</h5>\n                  :\n                  <h5>Right Click to Remove</h5>\n                }\n              </>\n            }\n          </Popup>\n        }\n      </Map>\n    </div>\n  );\n}","import React, { useState } from 'react';\n\n\n\nexport default function MapBar( props ) {\n  const [address, setAddress] = useState('');\n\n  // Handles getting location from mapbox geocoding API based on user input\n  const handleSearch = () => {\n    fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address.split(' ').join('%20')}.json?proximity=-75.37,43.21&country=US&types=postcode,place,address&access_token=${props.token}`, { method: 'GET' })\n      .then(response => response.json())\n      .then(jData => {\n        const newLocation = jData.features.reduce((acc, feat) => {\n          const region = feat.context.find((c) => c.id.includes('region') && (!props.allowedStates || props.allowedStates.includes(c.text)));\n          \n          if (!acc && region && feat.center[0] >= props.bbox.west && feat.center[1] >= props.bbox.south) {\n            const type = feat.place_type[0];\n            \n            let address;\n            if (type === 'postcode') {\n              address = feat.place_name.split(',').slice(0,2).join(',');\n            } else if (type === 'place') {\n              address = `${feat.text}, ${region.text}`;\n            } else if (type === 'address') {\n              const city = feat.context.find((c) => c.id.includes('place'));\n              address = `${feat.text}, ${city.text}, ${region.text}`;\n            }\n  \n            return {\n              address,\n              lng: feat.center[0],\n              lat: feat.center[1]\n            };\n          }\n\n          return acc;\n        }, false);\n\n        if (newLocation) {\n          setAddress(newLocation.address);\n          props.handleChangeLocations('add', newLocation);\n          props.mapRef.current.flyTo({\n            center: [newLocation.lng, newLocation.lat],\n            speed: 0.8,\n            essential: true\n          });\n        }\n      })\n      .catch(e => {\n        console.log(e);\n        return false;\n      });\n  };\n\n\n  return (\n    <div id='loc-map-bar'>\n      <input\n        id='loc-map-address-search'\n        type='text'\n        onChange={(e) => setAddress(e.target.value)}\n        onKeyDown={(e) => e.key === 'Enter' ? handleSearch() : ''}\n        value={address}\n      />\n      <label id='loc-map-bar-label'>Address Search</label>\n\n      <button\n        id='loc-map-bar-btn'\n        onClick={handleSearch}\n      >Search</button>\n\n      <div id='loc-modal-close' onClick={props.handleClose}>X</div>\n    </div>\n  );\n}","import React, { useState, useEffect, useRef } from 'react';\nimport './LocationPicker.css'\n\nimport Map from './Map';\nimport MapBar from './MapBar';\n\nconst defaultBBox = {\n  north: 47.53,\n  south: 37.09,\n  east: -66.89,\n  west: -82.7542\n};\n\nconst defaultId = 'default';\nconst defaultLocation = {\n  'default': {\n    address: '213 Warren Road, Ithaca, New York',\n    id: 'default',\n    lat: 42.457975,\n    lng: -76.46754\n  }\n};\n\n\n\nexport default function LocationPicker(props) {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [height, setHeight] = useState(0);\n  \n  // Use the passed in selected and locations props, otherwise uses the defaults\n  const [pastLocations, setPastLocations] = useState(Object.keys(props.locations).length > 0 ? props.locations : defaultLocation);\n  const [currentId, setCurrentId] = useState(props.selected || defaultId);\n\n  const mapRef = useRef(null);\n\n\n  // Handles moving the modal div to allow and disable clicking on the main page\n  useEffect(() => {\n    if (modalOpen === true) {\n      setHeight('100vh');\n    } else if (modalOpen === false) {\n      setTimeout(() => {\n        setHeight(0);\n      }, 400);\n    }\n  }, [modalOpen]);\n\n  const closeModal = () => {\n    props.newLocationsCallback(currentId, pastLocations);\n    setModalOpen(false);\n  };\n\n\n  // Main function for managing locations in state\n  const handleChangeLocations = (action, location) => {\n    // Adds timestamp ID to location object and adds it to state\n    if (action === 'add') {\n      location.id = String(Date.now());\n      setPastLocations(prev => {\n        return { ...prev, [location.id]: { ...location, id: location.id} };\n      });\n    }\n\n    // Removes given location object from state\n    if (action === 'remove') {\n      setPastLocations(prev => {\n        const newLocs = {...prev};\n        delete newLocs[location.id];\n        return newLocs;\n      });\n    }\n\n    // Handles changing the current location selected in state\n    if (action === 'add' || action === 'change') {\n      setCurrentId(location.id);\n    }\n  };\n\n\n  return (\n    <div id='loc-container' style={{ zIndex: props.modalZIndex || 100}}>\n      <div id='loc-location-text'>{pastLocations[currentId].address}</div>\n      <div id='loc-location-change' onClick={() => setModalOpen(true)}>Change Location</div>\n    \n      <div\n        id='loc-modal-container'\n        style={{ height, opacity: modalOpen ? 1 : 0 }}\n        onMouseDown={closeModal}\n      >\n        <div\n          id='loc-modal-box'\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <MapBar\n            token={props.token}\n            bbox={props.bbox || defaultBBox}\n            allowedStates={props.allowedStates}\n            mapRef={mapRef}\n            handleChangeLocations={handleChangeLocations}\n            handleClose={closeModal}\n          />\n\n          <Map\n            token={props.token}\n            allowedStates={props.allowedStates}\n            bbox={props.bbox || defaultBBox}\n            mapRef={mapRef}\n            handleChangeLocations={handleChangeLocations}\n            currentLocation={pastLocations[currentId]}\n            pastLocations={pastLocations}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\n//import React from 'react';\n//import axios from 'axios';\nimport PropTypes from 'prop-types';\n\nconst protocol = window.location.protocol;\n\nconst LoadPointData = ({param}) => {\n        return fetch(`${protocol}//grid2.rcc-acis.org/GridData`,param)\n             .then(r => r.json())\n             .then(data => {\n               return (data) ? data : null;\n             });\n}\n\nLoadPointData.propTypes = {\n  param: PropTypes.object.isRequired,\n};\n\nexport default LoadPointData;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport PropTypes from 'prop-types';\n\nconst protocol = window.location.protocol;\n\nconst LoadPointDataFcst = ({param}) => {\n        return fetch(`${protocol}//hrly.nrcc.cornell.edu/locHrly`,param)\n             .then(r => r.json())\n             .then(data => {\n               return (data) ? data : null;\n             });\n}\n\nLoadPointDataFcst.propTypes = {\n  param: PropTypes.object.isRequired,\n};\n\nexport default LoadPointDataFcst;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Highcharts from 'highcharts';\nimport HighchartsMore from 'highcharts/highcharts-more'\nimport Exporting from 'highcharts/modules/exporting'\nimport ExportData from 'highcharts/modules/export-data'\nimport HighchartsReact from 'highcharts-react-official';\nimport moment from 'moment';\nimport CircularProgress from '@material-ui/core//CircularProgress';\nimport Backdrop from '@material-ui/core//Backdrop';\n\nHighchartsMore(Highcharts)\nExporting(Highcharts)\nExportData(Highcharts)\nwindow.Highcharts = Highcharts;\n\nconst DisplayCharts = (props) => {\n        const currentYear = moment().format('YYYY')\n        const plantingYear = props.chartWeatherData.dates_for_summary[0].split('-')[0]\n        const fcstIsShowing = props.chartWeatherData.dates_selected_year.includes(props.chartWeatherData.firstFcstDate)\n        let idxOfFirstFcstDate\n        if (plantingYear===currentYear) {\n            idxOfFirstFcstDate = props.chartWeatherData.dates_selected_year.indexOf(props.chartWeatherData.firstFcstDate)\n        } else {\n            idxOfFirstFcstDate = props.chartWeatherData.dates_selected_year.length\n        }\n\n        // function to count item in array\n        const countItemInArray = (item,arr) => {\n            let i\n            let count = 0;\n            for(i = 0; i < arr.length; ++i){\n                if(arr[i] === item)\n                    count++;\n            }\n            return count\n        }\n\n        // data for first freeze\n        let dataForFirstFreeze = [];\n        let i, countOfThisDate;\n        for (i=0; i<props.chartWeatherData.datesOfFirstFreeze_15yr.length; i++) {\n            countOfThisDate = countItemInArray(props.chartWeatherData.datesOfFirstFreeze_15yr[i],props.chartWeatherData.datesOfFirstFreeze_15yr)\n            dataForFirstFreeze.push( {x: moment.utc(props.chartWeatherData.datesOfFirstFreeze_15yr[i],'YYYY-MM-DD').valueOf(), y: countOfThisDate, color: 'rgb(0,0,255)'} )\n        }\n\n        // data for last freeze\n        let dataForLastFreeze = [];\n        for (i=0; i<props.chartWeatherData.datesOfLastFreeze_15yr.length; i++) {\n            countOfThisDate = countItemInArray(props.chartWeatherData.datesOfLastFreeze_15yr[i],props.chartWeatherData.datesOfLastFreeze_15yr)\n            dataForLastFreeze.push( {x: moment.utc(props.chartWeatherData.datesOfLastFreeze_15yr[i],'YYYY-MM-DD').valueOf(), y: countOfThisDate, color: 'rgb(0,0,255)'} )\n        }\n\n        function tooltipFormatter() {\n            var i, item;\n            var header = '<span style=\"font-size:14px;font-weight:bold;text-align:center\">' + Highcharts.dateFormat('%b %d, %Y', this.x) + '</span>';\n            var tips = \"\";\n            for (i=0; i<this.points.length; i++) {\n                item = this.points[i];\n                //if ( (item.series.name !== \"POR Max\") && (item.series.name !== \"POR Min\") && (item.series.name !== \"POR\") ) {\n                if ( item.series.name !== \"Period of Record\" ) {\n                    tips += '<br/>' + item.y.toFixed(0) + ' : <span style=\"color:'+item.color+';font-weight:bold\">' +  item.series.name + '</span>';\n                }\n                if (item.series.name === \"Period of Record\") {\n                    tips += '<br/>' + item.point.low.toFixed(0) + '-' + item.point.high.toFixed(0) + ' : <span>Period of Record</span>';\n                }\n            }\n            return header + tips;\n        }\n\n        let year = props.locInfo['planting_date'].slice(6)\n        let crosshair_zindex = (props.chartWeatherData.gdd_ytd_por_min[-62]<100) ? 4 : 1;\n\n        // find date and create label for plotLine associated with user's provided target GDD value\n        const getTargetDate = () => {\n            let idxOfTarget\n            let idxOfMaxObsValue\n            let result\n            let label\n            if (props.chartWeatherData.gdd_ytd_selected.length>0) {\n              if (Math.max(...props.chartWeatherData.gdd_ytd_selected)>=props.locInfo['gdd_target']) {\n                idxOfTarget=props.chartWeatherData.gdd_ytd_selected.findIndex(function(number) {\n                  return number > props.locInfo['gdd_target'];\n                });\n                result = moment.utc(props.chartWeatherData.dates_selected_year[idxOfTarget], 'YYYY-MM-DD').valueOf()\n                label = 'Target Observed'\n              } else {\n                idxOfMaxObsValue = props.chartWeatherData.gdd_ytd_selected.indexOf( Math.max(...props.chartWeatherData.gdd_ytd_selected) )\n                idxOfTarget=props.chartWeatherData.gdd_ytd_15yr_ave.findIndex(function(number) {\n                  return (number+props.chartWeatherData.gdd_ytd_selected[idxOfMaxObsValue]-props.chartWeatherData.gdd_ytd_15yr_ave[idxOfMaxObsValue]) > props.locInfo['gdd_target'];\n                });\n                result = moment.utc(props.chartWeatherData.dates_for_summary[idxOfTarget], 'YYYY-MM-DD').valueOf()\n                label = 'Target Fcst'\n              }\n            } else {\n              idxOfTarget=props.chartWeatherData.gdd_ytd_15yr_ave.findIndex(function(number) {\n                return number > props.locInfo['gdd_target'];\n              });\n              result = moment.utc(props.chartWeatherData.dates_for_summary[idxOfTarget], 'YYYY-MM-DD').valueOf()\n              label = 'Target Fcst'\n            }\n            return {'value':result, 'label':label}\n        }\n\n        // construct plotLine for user's provided target GDD value\n        let plotLines = []\n        let targetInfo\n        if (props.targetIsEnabled) {\n            targetInfo = getTargetDate()\n            plotLines.push({ label: {text:targetInfo.label, y:30}, color: '#4caf50', width: 4, zIndex: 6, value: targetInfo.value })\n        }\n\n        const genChartConfig = () => {\n              return {\n                 plotOptions: {\n                     line: {\n                         animation: true,\n                     },\n                     series: {\n                         type: 'line',\n                         animation: false,\n                         lineWidth: 4,\n                         marker: {\n                             symbol: 'circle',\n                         },\n                         states: {\n                             hover: {\n                                 enabled: true,\n                                 halo: {\n                                     size: 0\n                                 }\n                             }\n                         }\n                     }\n                 },\n                 exporting: {\n                   menuItemDefinitions: {\n                     // Custom definition\n                     downloadCSV: {\n                       text: 'Download as CSV table'\n                     },\n                     downloadXLS: {\n                       text: 'Download as XLS table'\n                     }\n                   },\n                   buttons: {\n                     contextButton: {\n                       menuItems: [\n                         \"printChart\",\n                         \"separator\",\n                         \"downloadPNG\",\n                         \"downloadJPEG\",\n                         \"downloadPDF\",\n                         \"downloadSVG\",\n                         \"separator\",\n                         \"downloadCSV\",\n                         \"downloadXLS\",\n               //              \"viewData\",\n                         \"openInCloud\"\n                       ]\n                     }\n                   }\n                 },\n                 chart: { marginTop: 60, backgroundColor: null },\n                 credits: {\n                   href: \"http://www.rcc-acis.org\",\n                   text: \"Powered by ACIS\"\n                 },\n                 title: {\n                     text: year+' Cumulative Growing Degree Days (Base '+props.locInfo['gdd_base']+')'\n                 },\n                 subtitle: {\n                     text: props.locInfo['address'],\n                     style:{\"font-size\":\"14px\",color:\"#000000\"},\n                 },\n                 tooltip: { useHtml:true, shared:true, borderColor:\"#000000\", borderWidth:2, borderRadius:8, shadow:false, backgroundColor:\"#ffffff\",\n                   xDateFormat:\"%b %d, %Y\", positioner:function(){return {x:80, y:60}}, shape: 'rect',\n                   crosshairs: { width:1, color:\"#ff0000\", snap:true, zIndex: crosshair_zindex }, formatter:tooltipFormatter },\n                 legend: { align: 'left', symbolRadius: 0, floating: true, verticalAlign: 'top', layout: 'vertical', x: 65, y: 50 },\n                 xAxis: {\n                     type: 'datetime',\n                     startOnTick: false,\n                     endOnTick: false,\n                     min: moment.utc(props.locInfo['planting_date'],'MM/DD/YYYY').valueOf(),\n                     max: props.view==='season-outlook' ? moment.utc(plantingYear+'-12-31','YYYY-MM-DD').valueOf() : moment.utc(props.chartWeatherData.dates_selected_year[props.chartWeatherData.dates_selected_year.length-1],'YYYY-MM-DD').valueOf(),\n                     labels: { align: 'center', x: 0, y: 20 },\n                     plotLines: plotLines,\n                     dateTimeLabelFormats:{ day:'%d %b', week:'%d %b', month:'%b<br/>%Y', year:'%Y' },\n                 },\n                 yAxis: [\n                     { title:{ text:'Cumulative GDD', style:{\"font-size\":\"14px\", color:\"#000000\"}}, min: 0,\n                         gridZIndex:1, labels:{style:{color:\"#000000\"}}},\n                     { title:{ text:'First/Last Freeze (# yrs)', align:'low', style:{\"font-size\":\"14px\", color:\"#0000FF\"}}, min: 0, max: 8,\n                         visible: props.freezeIsEnabled,\n                     labels:{style:{color:\"#0000FF\"}}, opposite: true },\n                 ],\n                 series: [{\n                     name: \"Season to Date\",\n                     data: props.chartWeatherData.gdd_ytd_selected.slice(0,idxOfFirstFcstDate).map((item,index) => {\n                       let date_item = moment.utc(props.chartWeatherData.dates_selected_year[index],\"YYYY-MM-DD\").valueOf()\n                       return [date_item,item]\n                     }),\n                     type: \"line\", zIndex: 24, lineWidth: 2, color: \"#00dd00\", shadow: false,\n                     marker: { enabled: true, fillColor: \"#00dd00\", lineWidth: 2, lineColor: \"#00dd00\", radius:2, symbol:\"circle\" }\n                   },{\n                     name: \"6 Day Forecast\",\n                     data: props.chartWeatherData.gdd_ytd_selected.slice(idxOfFirstFcstDate).map((item,index) => {\n                       let date_item = moment.utc(props.chartWeatherData.dates_selected_year[idxOfFirstFcstDate+index],\"YYYY-MM-DD\").valueOf()\n                       return [date_item,item]\n                     }),\n                     showInLegend: fcstIsShowing,\n                     type: \"line\", zIndex: 24, lineWidth: 2, color: \"#dd0000\", shadow: false,\n                     marker: { enabled: true, fillColor: \"#dd0000\", lineWidth: 2, lineColor: \"#dd0000\", radius:2, symbol:\"circle\" }\n                   },{\n                     name: \"15 Year Average\",\n                     data: props.chartWeatherData.gdd_ytd_15yr_ave.map((item,index) => {\n                       let date_item = moment.utc(props.chartWeatherData.dates_for_summary[index],\"YYYY-MM-DD\").valueOf()\n                       return [date_item,item]\n                     }),\n                     type: \"line\", zIndex: 23, lineWidth: 2, color: \"#0000ff\",\n                     marker: { enabled: false, states: { hover: { enabled: false }} }\n                   },{\n                     name: '30 Year \"Normal\"',\n                     data: props.chartWeatherData.gdd_ytd_30yr_nor.map((item,index) => {\n                       let date_item = moment.utc(props.chartWeatherData.dates_for_summary[index],\"YYYY-MM-DD\").valueOf()\n                       return [date_item,item]\n                     }),\n                     type: \"line\", zIndex: 22, lineWidth: 2, color: \"#B041FF\",\n                     marker: { enabled: false, states: { hover: { enabled: false }} }\n                   },{\n                     name: \"Period of Record\",\n                     data: props.chartWeatherData.gdd_ytd_por_min.map((item,index) => {\n                       let date_item = moment.utc(props.chartWeatherData.dates_for_summary[index],\"YYYY-MM-DD\").valueOf()\n                       return [date_item,props.chartWeatherData.gdd_ytd_por_min[index], props.chartWeatherData.gdd_ytd_por_max[index]]\n                     }),\n                     type: \"arearange\", showInLegend: true, zIndex: 10, lineWidth: 2, color: \"#444444\", fillColor: \"#eeeeee\", fillOpacity: 0.1,\n                     marker : {enabled: false, states: { hover: { enabled: false }}, symbol: 'square', lineWidth: 2, lineColor: '#444444', radius: 12 }\n                   },{\n                     name: 'First/Last Freezes (last 15 yrs)', type: 'column', pointWidth: 1, borderWidth: 0,\n                     zIndex: props.view==='season-outlook' ? 1 : 25,\n                     visible: props.freezeIsEnabled,\n                     yAxis: 1,\n                     showInLegend: props.freezeIsEnabled,\n                     enableMouseTracking: false,\n                     data: dataForLastFreeze.concat(dataForFirstFreeze),\n                   }\n                 ],\n              }\n            }\n\n    return(\n\n      <>\n        <HighchartsReact\n          containerProps={{ style: { height: \"100%\" } }}\n          highcharts={Highcharts}\n          options={genChartConfig()}\n          //callback={afterRender}\n        />\n\n        {props.dataIsLoading &&\n          <Backdrop\n            style={{zIndex:1000}}\n            invisible={true}\n            //open={!props.values}\n            open={props.dataIsLoading}\n          >\n            <CircularProgress size={200} color=\"primary\"/>\n          </Backdrop>\n        }\n      </>\n\n    );\n\n\n}\n\nDisplayCharts.propTypes = {\n  locInfo: PropTypes.object.isRequired,\n  freezeIsEnabled: PropTypes.bool.isRequired,\n  targetIsEnabled: PropTypes.bool.isRequired,\n  chartWeatherData: PropTypes.object.isRequired,\n  view: PropTypes.string.isRequired,\n  dataIsLoading: PropTypes.bool.isRequired,\n};\n\nexport default DisplayCharts;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport 'date-fns';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nconst styles = theme => ({\n  //root: {\n  //  display: 'flex',\n  //  flexWrap: 'wrap',\n  //},\n});\n\n//const getLabel = (v) => {\n//  return v+'F'\n//}\n\nconst PlantingDatePicker = (props) => {\n        //const { classes } = props;\n        return (\n          <MuiPickersUtilsProvider utils={DateFnsUtils}>\n            <KeyboardDatePicker\n              disableToolbar\n              views={[\"date\"]}\n              variant=\"inline\"\n              format=\"MM/dd/yyyy\"\n              minDate=\"01/01/1980\"\n              maxDate=\"12/31/2022\"\n              PopoverProps={{style: {...{left: '180px', top: '-140px'}}}}\n              margin=\"none\"\n              id=\"date-picker-inline\"\n              label=\"Planting Date\"\n              value={props.value}\n              onChange={props.onchange}\n              autoOk={true}\n              InputProps={{ readOnly: true }}\n              KeyboardButtonProps={{\n                'aria-label': 'change planting date',\n              }}\n              style={{ width: 160 }}\n            />\n          </MuiPickersUtilsProvider>\n        );\n}\n\nPlantingDatePicker.propTypes = {\n  value: PropTypes.string.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(PlantingDatePicker);\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport green from '@material-ui/core/colors/green';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  formControl: {\n    minWidth: 160,\n  },\n  menuPaper: {\n    maxHeight: 190,\n    backgroundColor: green[600],\n    color: '#ffffff',\n  }\n});\n\nconst getLabel = (v) => {\n  return v+'F'\n}\n\nconst GddBaseSelect = (props) => {\n        const { classes } = props;\n        return (\n          <form className={classes.root} autoComplete=\"off\">\n            <FormControl className={classes.formControl}>\n              <InputLabel htmlFor=\"gdd_base\">GDD Base</InputLabel>\n              <Select\n                value={props.value}\n                onChange={props.onchange}\n                margin='none'\n                MenuProps={{ classes: { paper: classes.menuPaper } }}\n                inputProps={{\n                  name: 'gdd_base',\n                  id: 'gdd_base',\n                }}\n              >\n                {props.values &&\n                  props.values.map((v,i) => (\n                    <MenuItem key={i} value={v}>{getLabel(v)}</MenuItem>\n                  ))\n                }\n              </Select>\n            </FormControl>\n          </form>\n        );\n}\n\nGddBaseSelect.propTypes = {\n  value: PropTypes.string.isRequired,\n  values: PropTypes.array.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(GddBaseSelect);\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\n//import InputLabel from '@material-ui/core/InputLabel';\n//import MenuItem from '@material-ui/core/MenuItem';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  formControl: {\n    minWidth: 100,\n    maxWidth: 120,\n  },\n});\n\n//const getLabel = (v) => {\n//  return v+'F'\n//}\n\nconst GddTargetSelect = (props) => {\n        const { classes } = props;\n        return (\n          <form className={classes.root} autoComplete=\"off\">\n            <FormControl className={classes.formControl}>\n              <TextField\n                fullWidth\n                color='primary'\n                label='GDD Target'\n                margin='none'\n                value={props.value}\n                disabled={!props.enabled}\n                onChange={props.onchange}\n                inputProps={{\n                  name: 'gdd_target',\n                  id: 'gdd_target',\n                }}\n              />\n            </FormControl>\n          </form>\n        );\n}\n\nGddTargetSelect.propTypes = {\n  value: PropTypes.string.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(GddTargetSelect);\n","///////////////////////////////////////////////////////////////////////////////\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { withStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nconst GreenCheckbox = withStyles({\n  root: {\n    color: green[600],\n    '&$checked': {\n      color: green[800],\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color=\"default\" {...props} />);\n\nclass GddTargetSelectEnable extends Component {\n\n  render() {\n        return (\n\n          <FormControlLabel\n            control={<GreenCheckbox checked={this.props.value} onChange={this.props.onchange} name=\"enableTarget\" />}\n            label=\"\"\n          />\n\n        )\n  }\n\n};\n\nGddTargetSelectEnable.propTypes = {\n  value: PropTypes.bool.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default GddTargetSelectEnable;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\n//import InputLabel from '@material-ui/core/InputLabel';\n//import MenuItem from '@material-ui/core/MenuItem';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  formControl: {\n    minWidth: 100,\n    maxWidth: 120,\n  },\n});\n\n//const getLabel = (v) => {\n//  return v+'F'\n//}\n\nconst FreezeThreshSelect = (props) => {\n        const { classes } = props;\n        return (\n          <form className={classes.root} autoComplete=\"off\">\n            <FormControl className={classes.formControl}>\n              <TextField\n                fullWidth\n                color='primary'\n                label='Frost Temp (F)'\n                margin='none'\n                value={props.value}\n                disabled={!props.enabled}\n                onChange={props.onchange}\n                inputProps={{\n                  name: 'freeze_threshold',\n                  id: 'freeze_threshold',\n                }}\n              />\n            </FormControl>\n          </form>\n        );\n}\n\nFreezeThreshSelect.propTypes = {\n  value: PropTypes.string.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(FreezeThreshSelect);\n","///////////////////////////////////////////////////////////////////////////////\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { withStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nconst GreenCheckbox = withStyles({\n  root: {\n    color: green[600],\n    '&$checked': {\n      color: green[800],\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color=\"default\" {...props} />);\n\nclass FreezeThreshSelectEnable extends Component {\n\n  render() {\n        return (\n\n          <FormControlLabel\n            control={<GreenCheckbox checked={this.props.value} onChange={this.props.onchange} name=\"enableTarget\" />}\n          />\n\n        )\n  }\n\n};\n\nFreezeThreshSelectEnable.propTypes = {\n  value: PropTypes.bool.isRequired,\n  onchange: PropTypes.func.isRequired,\n};\n\nexport default FreezeThreshSelectEnable;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import { withStyles } from '@material-ui/core/styles';\n//import Button from '@material-ui/core/Button';\n//import red from '@material-ui/core/colors/red';\nimport Grid from '@material-ui/core/Grid';\n//import Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\n// Components\n//import LocationPicker from './LocationPicker';\n//import LocationPicker from './LocationPicker/LocationPicker'\nimport PlantingDatePicker from './PlantingDatePicker';\nimport GddBaseSelect from './GddBaseSelect';\nimport GddTargetSelect from './GddTargetSelect';\nimport GddTargetSelectEnable from './GddTargetSelectEnable';\nimport FreezeThreshSelect from './FreezeThreshSelect';\nimport FreezeThreshSelectEnable from './FreezeThreshSelectEnable';\n\n//import StationPickerMap from '../../common/StationPickerMap';\n//import VarPicker from '../VarPicker';\n//import ScenarioPicker from '../ScenarioPicker';\n//import TimescalePicker from '../TimescalePicker';\n//import PeriodPicker from '../PeriodPicker';\n//import HelpUserPopover from '../HelpUserPopover';\n//import HelpUserContent from '../HelpUserContent';\n\n\nclass UserInput extends React.Component {\n  //constructor(props) {\n  //    super(props);\n  //}\n\n  render() {\n    //const { classes } = this.props;\n\n    return (\n      <Box padding={2} border={0} borderRadius={4} borderColor=\"primary.main\">\n\n                    <Grid container item direction=\"column\" spacing={3}>\n\n                      <Grid item container direction=\"column\" justify=\"center\" alignItems=\"center\" spacing={2}>\n\n                        <Grid item>\n                          <PlantingDatePicker\n                            value={this.props.locations[this.props.selected]['planting_date']}\n                            onchange={this.props.onchange_plantingDate}\n                          />\n                        </Grid>\n\n                        <Grid item>\n                          <GddBaseSelect\n                            value={this.props.locations[this.props.selected]['gdd_base']}\n                            values={this.props.gdd_list}\n                            onchange={this.props.onchange_locInfo}\n                          />\n                        </Grid>\n\n                        <Grid item container direction=\"row\" justify=\"center\" alignItems=\"flex-end\">\n                          <GddTargetSelectEnable\n                            value={this.props.targetIsEnabled}\n                            onchange={this.props.onchange_targetIsEnabled}\n                          />\n                          <GddTargetSelect\n                            value={this.props.locations[this.props.selected]['gdd_target']}\n                            enabled={this.props.targetIsEnabled}\n                            onchange={this.props.onchange_locInfo}\n                          />\n                        </Grid>\n\n                        <Grid item container direction=\"row\" justify=\"center\" alignItems=\"flex-end\">\n                          <FreezeThreshSelectEnable\n                            value={this.props.freezeIsEnabled}\n                            onchange={this.props.onchange_freezeIsEnabled}\n                          />\n                          <FreezeThreshSelect\n                            value={this.props.locations[this.props.selected]['freeze_threshold']}\n                            enabled={this.props.freezeIsEnabled}\n                            onchange={this.props.onchange_locInfo}\n                          />\n                        </Grid>\n                      </Grid>\n\n                    </Grid>\n\n      </Box>\n    );\n  }\n}\n\nUserInput.propTypes = {\n  locations: PropTypes.object.isRequired,\n  selected: PropTypes.string.isRequired,\n  view: PropTypes.string.isRequired,\n  targetIsEnabled: PropTypes.bool.isRequired,\n  freezeIsEnabled: PropTypes.bool.isRequired,\n  gdd_list: PropTypes.array.isRequired,\n  //mapbox_token: PropTypes.string.isRequired,\n  onchange_locationPicker: PropTypes.func.isRequired,\n  onchange_view: PropTypes.func.isRequired,\n  onchange_plantingDate: PropTypes.func.isRequired,\n  onchange_locInfo: PropTypes.func.isRequired,\n  onchange_targetIsEnabled: PropTypes.func.isRequired,\n  onchange_freezeIsEnabled: PropTypes.func.isRequired,\n};\n\nexport default UserInput;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport Popover from '@material-ui/core/Popover';\n\nconst styles = theme => ({\n  typography: {\n    //margin: theme.spacing.unit * 2,\n    margin: theme.spacing(2),\n  },\n});\n\nclass VarPopover extends React.Component {\n  state = {\n    anchorEl: null,\n  };\n\n  handleClick = event => {\n    this.setState({\n      anchorEl: event.currentTarget,\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    return (\n      <div>\n        <Button\n          variant=\"text\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={this.handleClick}\n        >\n          <ExpandMore />\n          Select chart details\n        </Button>\n        <Popover\n          id=\"simple-popper\"\n          open={open}\n          anchorEl={anchorEl}\n          onClose={this.handleClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'left',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'left',\n          }}\n        >\n          <Box paddingTop={1} border={2} borderRadius={4} borderColor=\"primary.main\">\n            {this.props.content}\n          </Box>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nVarPopover.propTypes = {\n  content: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(VarPopover);\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\n//import PropTypes from 'prop-types';\nimport Box from '@material-ui/core/Box';\n\nconst HelpMain = () => {\n        return (\n            <Box maxWidth={800} padding={1} border={1} borderRadius={4} borderColor=\"primary.main\" bgcolor=\"#f5f5dc\">\n               <h2>Data Sources and methods</h2>\n               <h4><br/>&bull; ABOUT THE GROWING DEGREE DAY CALCULATOR</h4>\n               <p>\n               This tool plots Growing Degree Days (GDD), also called Growing Degree Units (GDUs), which measure heat accumulation in order to predict plant and insect development. In a stress-free environment, the development rate of a plant is dependent on temperature. Using the expected temperature of the summer season, based on previous years, this tool can help predict the best days to plant, harvest, and fertilize.\n               </p>\n               <p>\n               GDDs are calculated by taking the average of the daily maximum and minimum air temperature, and then subtracting a base temperature. The base temperature is the lowest temperature at which a crop will grow.\n               </p>\n               <h4><br/>&bull; COMMON BASE TEMPERATURES USED FOR GDD CALCULATION</h4>\n               <p>\n               50F is the most common base for GDD calculations. However, a number of other bases are used depending on the lifecycle of the plant or insect of interest. Here is a small sample:\n               </p>\n               <ul>\n               <i>Plants</i>\n                   <li>50F : corn, sorghum, soybeans, tomato</li>\n                   <li>46F : sunflower, potato</li>\n                   <li>42F : wheat, barley, rye, oats, flaxseed, lettuce, asparagus</li>\n               </ul>\n               <ul>\n               <i>Insects and Diseases</i>\n                   <li>52F : Green Cloverworm</li>\n                   <li>50F : Codling moth, Apple maggot</li>\n                   <li>48F : Alfalfa weevil</li>\n                   <li>45F : Corn rootworm, Oriental fruit moth</li>\n                   <li>43F : Stalk Borer</li>\n                   <li>40F : Onion maggot</li>\n                   <li>39F : Cabbage maggot</li>\n                   <li>32F : Apple scab</li>\n               </ul>\n               <h4>&bull; AIR TEMPERATURE DATA</h4>\n               <p>\n               The 2.5 x 2.5 mile gridded dataset of maximum and minimum air temperatures is produced daily for the Northeast United States by the <a href=\"http://www.nrcc.cornell.edu\" target=\"_blank\" rel=\"noopener noreferrer\">Northeast Regional Climate Center</a>, using methods described in Degaetano and Belcher (2007). These data are available for use through the Applied Climate Information System (<a href=\"http://www.rcc-acis.org\" target=\"_blank\" rel=\"noopener noreferrer\">ACIS</a>) web service.\n               </p>\n               <p>\n               Degaetano, A.T. and B.N. Belcher. (2007). Spatial Interpolation of Daily Maximum and Minimum Air Temperature Based on Meteorological Model Analyses and Independent Observations. Journal of Applied Meteorology and Climatology. 46.\n               </p>\n               <h4>&bull; FORECASTS AND OUTLOOKS</h4>\n               <p>\n               Six-day forecasts of daily temperature extremes obtained through the National Weather Service's National Digital Forecast Database (Glahn and Ruth, 2003) provide the means to produce 6-day GDD forecasts.\n               </p>\n               <p>\n               Seasonal outlooks are produced based on historical observations over recent decades. Minimum, maximum and average observed GDD accumulation over previous seasons provide expected guidelines and reference points based on what has occurred at a specific location in the past. \n               </p>\n               <p>\n               Glahn, H. R., and D. P. Ruth, 2003: The new digital forecast database of the National Weather Service. Bull. Amer. Meteor. Soc., 84, 195201.\n               </p>\n            </Box>\n        );\n} \n\nexport {HelpMain};\n\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport HelpIcon from '@material-ui/icons/Help';\nimport Popover from '@material-ui/core/Popover';\n\nconst styles = theme => ({\n  typography: {\n    margin: theme.spacing(2),\n  },\n  menuButton: {\n    marginRight: -60,\n    marginTop: -10,\n  },\n});\n\nclass HelpToolPopover extends React.Component {\n  state = {\n    anchorEl: null,\n  };\n\n  handleClick = event => {\n    this.setState({\n      anchorEl: event.currentTarget,\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    return (\n      <div>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"Help\"\n          className={classes.menuButton}\n          onClick={this.handleClick}\n        >\n          <HelpIcon />\n        </IconButton>\n        <Popover\n          id=\"simple-popper\"\n          open={open}\n          anchorEl={anchorEl}\n          onClick={this.handleClose}\n          onClose={this.handleClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n        >\n          {this.props.content}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nHelpToolPopover.propTypes = {\n  classes: PropTypes.object.isRequired,\n  content: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(HelpToolPopover);\n","///\n///\n\nimport moment from 'moment';\n\nfunction shiftDataBackOneDay(data) {\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n\n    function subtractOneDayFromDateString(d) {\n      let result = moment(d,'YYYY-MM-DD').subtract(1,'days').format('YYYY-MM-DD')\n      return result\n    }\n\n    let dataShifted = data.map(item => [subtractOneDayFromDateString(item[0]),item[1],item[2]])\n    // only return data starting with expected first date\n    return dataShifted.slice(1)\n    //return dataShifted\n}\n\nfunction calcGddAcc(data,plantingDate,gddBase) {\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n    let sum\n\n    function calcGdd(mx,mn,b,limits=null) {\n        if (limits) {\n            let mx_lim = limits[0]\n            let mn_lim = limits[1]\n            mx = mx>mx_lim ? mx_lim : mx\n            mn = mn<mn_lim ? mn_lim : mn\n        }\n        return Math.max(...[((mx+mn)/2.) - b, 0])\n    }\n\n    let startDateMMDD = plantingDate.slice(0,2)+'-'+plantingDate.slice(3,5);\n    //let zeroDateMMDD = moment(plantingDate,'MM/DD/YYYY').subtract(1,'day').format('MM-DD')\n    let base = (gddBase==='86/50') ? 50 : gddBase\n    let limits = (gddBase==='86/50') ? [86,50] : null\n    let dataAccSincePlantingDate = data.map((sum = 0, item =>\n      [item[0], item[0].slice(5)===startDateMMDD ? sum = calcGdd(item[1],item[2],base,limits) : sum += calcGdd(item[1],item[2],base,limits)]\n      //[item[0], item[0].slice(5)===startDateMMDD ? sum = 0 : sum += calcGdd(item[1],item[2],base,limits)]\n      //[item[0], item[0].slice(5)===zeroDateMMDD ? sum = 0 : sum += calcGdd(item[1],item[2],base,limits)]\n    ))\n    return dataAccSincePlantingDate\n}\n\nfunction getSelectedYearData(data,plantingDate) {\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n\n    var plantingDateFormatted = plantingDate.slice(6,10)+'-'+plantingDate.slice(0,2)+'-'+plantingDate.slice(3,5);\n    var selectedYear = plantingDate.slice(6,10);\n    var dataFiltered = null;\n    var dates_selected_year = null;\n    var gdd_ytd_selected = null;\n    var miss = -999;\n\n    // data arrays for selected year\n    function isWithinThisYear(value,index,array){\n        return (value[0].split('-')[0]===selectedYear && plantingDateFormatted<=value[0])\n    }\n    dataFiltered = data.filter(isWithinThisYear);\n    dates_selected_year = dataFiltered.map(x => x[0]);\n    gdd_ytd_selected = dataFiltered.map(x => (x[1]!==miss ? x[1] : null));\n    //console.log(dates_selected_year)\n    //console.log(gdd_ytd_selected)\n\n    return {\n        'dates_selected_year': dates_selected_year,\n        'gdd_ytd_selected': gdd_ytd_selected,\n    }\n}\n\nfunction getExtremesAndAverageData(data,plantingDate) {\n    // ------------------------------------------------------------------------\n    // ------------------------------------------------------------------------\n\n    var plantingDateFormatted = plantingDate.slice(6,10)+'-'+plantingDate.slice(0,2)+'-'+plantingDate.slice(3,5);\n    var selectedYear = plantingDate.slice(6,10);\n    var currentYear = moment().format('YYYY')\n    let isLeapYearSelected = moment([selectedYear]).isLeapYear()\n    var dataFiltered = null;\n    var distinctDates = null;\n    var dates_for_summary = [];\n    var gdd_ytd_por_max = [];\n    var gdd_ytd_por_min = [];\n    var gdd_ytd_15yr_ave = [];\n    var gdd_ytd_30yr_nor = [];\n\n    let average = arr => arr.reduce( ( p, c ) => p + c, 0 ) / arr.length;\n\n    function isAfterPlantingDateInHistoricalYears(value,index,array){\n        let isNotCurrentYear = value[0].split('-')[0]!==currentYear\n        let isAfterPlantingDate = plantingDateFormatted.slice(5)<=value[0].slice(5)\n        return (isNotCurrentYear && isAfterPlantingDate)\n    }\n    dataFiltered = data.filter(isAfterPlantingDateInHistoricalYears);\n    distinctDates = [...new Set(dataFiltered.map(x => x[0].slice(5)))]\n    distinctDates.sort()\n\n    function isOnDate(value,index,array){\n        return (value[0].slice(5)===this)\n    }\n    distinctDates.forEach((d) => {\n        if (d==='02-29' && !isLeapYearSelected) { return }\n        let dataForDate = dataFiltered.filter(isOnDate,d);\n        let dataToSummarizeForDate = dataForDate.map(x => x[1])\n        dates_for_summary.push(selectedYear+'-'+d)\n        gdd_ytd_por_max.push(Math.max(...dataToSummarizeForDate))\n        gdd_ytd_por_min.push(Math.min(...dataToSummarizeForDate))\n        gdd_ytd_15yr_ave.push(average(dataToSummarizeForDate.slice(-15)))\n        gdd_ytd_30yr_nor.push(average(dataToSummarizeForDate.slice(1991-parseInt(currentYear,10), 2020-parseInt(currentYear,10))))\n    })\n\n    return {\n        'dates_for_summary': dates_for_summary,\n        'gdd_ytd_por_max': gdd_ytd_por_max,\n        'gdd_ytd_por_min': gdd_ytd_por_min,\n        'gdd_ytd_15yr_ave': gdd_ytd_15yr_ave,\n        'gdd_ytd_30yr_nor': gdd_ytd_30yr_nor,\n    }\n}\n\nfunction getFreezeData(data,plantingDate,freezeThreshold) {\n    //\n    //\n\n    if (!freezeThreshold) {\n      return {\n        'datesOfFirstFreeze_15yr':[],\n        'datesOfLastFreeze_15yr':[],\n      }\n    }\n\n    //var plantingDateFormatted = plantingDate.slice(6,10)+'-'+plantingDate.slice(0,2)+'-'+plantingDate.slice(3,5);\n    var selectedYear = plantingDate.slice(6,10);\n    var currentYear = moment().format('YYYY')\n    let years = []\n    let seasonStartDates\n    let datesOfFirstFreeze_15yr = []\n    let datesOfLastFreeze_15yr = []\n\n    let dates = data.map(x => x[0])\n\n    // find last 15 years before current year\n    for (let i = 1; i < 16; i++) {\n      years.push(parseInt(currentYear,10)-i)\n    }\n\n    // season start dates\n    // Each year, we will find the last frost in Spring before this date, and the first frost in Fall after this date.\n    seasonStartDates = years.map(x => x.toString()+'-06-30')\n    seasonStartDates.sort()\n\n    // find first/last freezes\n    function isBelowFreezeThreshold(value,index,array){\n        return value[2]<=parseInt(freezeThreshold,10)\n    }\n    let idxOfDate\n    let springFreezes\n    let fallFreezes\n    seasonStartDates.forEach((d) => {\n      idxOfDate = dates.indexOf(d)\n      // get last freeze in Spring\n      springFreezes = data.slice(idxOfDate-180,idxOfDate).filter(isBelowFreezeThreshold)\n      if (springFreezes.length>0) {\n          datesOfLastFreeze_15yr.push(springFreezes.slice(-1)[0][0])\n      } else {\n          datesOfLastFreeze_15yr = []\n      }\n      // get first freeze in Fall\n      fallFreezes = data.slice(idxOfDate,idxOfDate+180).filter(isBelowFreezeThreshold)\n      if (fallFreezes.length>0) {\n          datesOfFirstFreeze_15yr.push(fallFreezes[0][0])\n      } else {\n          datesOfFirstFreeze_15yr = []\n      }\n    })\n\n    // only include data on or after planting date\n\n    // change years to selected year, for highcharts display\n    datesOfFirstFreeze_15yr = datesOfFirstFreeze_15yr.map(x => selectedYear+x.slice(4))\n    datesOfLastFreeze_15yr = datesOfLastFreeze_15yr.map(x => selectedYear+x.slice(4))\n\n    // highcharts prefers working with sorted data\n    if (datesOfFirstFreeze_15yr.length>0) { datesOfFirstFreeze_15yr.sort() };\n    if (datesOfLastFreeze_15yr.length>0) { datesOfLastFreeze_15yr.sort() };\n\n    return {\n        'datesOfFirstFreeze_15yr':datesOfFirstFreeze_15yr,\n        'datesOfLastFreeze_15yr':datesOfLastFreeze_15yr,\n    }\n}\n\nfunction getFirstFcstDate(lastObsDate) {\n    // ------------------------------------------------------------------------\n    // Since lastObsDate is provided as \"morning observation date\", this date\n    // serves as the firstFcstDate when dates are shifted to reflect the dates\n    // of heating occurrence (array dates for display are shifted in this manner).\n    // Therefore, we can simply assign lastObsDate as the firstFcstDate without\n    // any further date manipulation.\n    // ------------------------------------------------------------------------\n    return {\n      'firstFcstDate':lastObsDate\n    }\n}\n\nexport function processWeatherData(dataDailyExtremes,lastObsDate,plantingDate,gddBase,freezeThreshold) {\n\n    // ------------------------------------------------------------------------\n    //\n    //\n    //\n    // ------------------------------------------------------------------------\n\n    var results = {}\n\n    // Shift dates back one day, since data reflect morning observations, and we want GDD obs\n    // dates to reflect when the heating occurred.\n    let dataDailyExtremesShifted = shiftDataBackOneDay(dataDailyExtremes)\n\n    // calculate accumulated GDD data\n    let data = calcGddAcc(dataDailyExtremesShifted,plantingDate,gddBase)\n\n    results = {\n        ...results,\n        ...getSelectedYearData(data,plantingDate),\n        ...getExtremesAndAverageData(data,plantingDate),\n        ...getFreezeData(dataDailyExtremes,plantingDate,freezeThreshold),\n        ...getFirstFcstDate(lastObsDate),\n     }\n\n    return results\n\n}\n\n","///////////////////////////////////////////////////////////////////////////////\n//\n// Climate Smart Farming Growing Degree Day Calculator\n// Copyright (c) 2018 Cornell Institute for Climate Smart Solutions\n// All Rights Reserved\n//\n// This software is published under the provisions of the GNU General Public\n// License <http://www.gnu.org/licenses/>. A text copy of the license can be\n// found in the file 'LICENSE' included with this software.\n//\n// A text copy of the copyright notice, licensing conditions and disclaimers\n// is available in the file 'COPYRIGHT' included with this software.\n//\n///////////////////////////////////////////////////////////////////////////////\n\nimport React, { Component } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport Button from '@material-ui/core/Button';\nimport moment from 'moment';\nimport ls from 'local-storage';\n\n// Components\nimport LocationPicker from './LocationPicker/LocationPicker'\nimport LoadPointData from './LoadPointData';\nimport LoadPointDataFcst from './LoadPointDataFcst';\nimport DisplayChart from './DisplayChart';\nimport UserInput from './UI/UserInput';\nimport VarPopover from './VarPopover';\nimport {HelpMain} from \"./HelpToolContent\";\nimport HelpToolPopover from \"./HelpToolPopover\";\n\nimport { processWeatherData } from './processWeatherData';\n\nclass ToolContents extends Component {\n\n    constructor(props) {\n        super(props);\n        //this.toolName = 'TEST';\n        this.toolName = 'CSF-GDDTOOL';\n        this.token = 'pk.eyJ1IjoiYm5iMiIsImEiOiJjazJtYTgwajQwZnFiM29waGo4NHI1MWpnIn0.Xmb6eYeJArqqBQtKkWorUQ';\n        this.bbox = {\n          north: 47.53,\n          south: 37.09,\n          east: -66.89,\n          west: -82.7542\n        };\n        // Limits locations to be within this list of states\n        this.allowedStates = [\n          'Maine',\n          'New Hampshire',\n          'Vermont',\n          'Rhode Island',\n          'Massachusetts',\n          'Connecticut',\n          'New York',\n          'New Jersey',\n          'Pennsylvania',\n          'Delaware',\n          'Maryland',\n          'West Virginia',\n          'Ohio',\n          'Virginia',\n          'Kentucky'\n        ];\n        this.gdd_list = ['86/50','50','49','48','47','46','45','44','43','42','41','40',\n          '39','38','37','36','35','34','33','32']\n        this.defaultLocation = {\n          \"address\":\"Cornell University, Ithaca, NY\",\n          \"lat\":42.45,\n          \"lng\":-76.48,\n          \"id\":\"default\",\n          \"planting_date\":\"01/01/2022\",\n          \"gdd_base\":\"50\",\n          \"gdd_target\":\"1500\",\n          \"freeze_threshold\":\"32\",\n        }\n        this.defaultLocations = {\n          'default':this.defaultLocation\n        }\n        this.state = {\n          locations: ls(this.toolName+'.locations') || this.defaultLocations,\n          selected: ls(this.toolName+'.selected') || this.defaultLocation['id'],\n          pointData: null,\n          dataIsLoading: false,\n          targetIsEnabled: false,\n          freezeIsEnabled: false,\n          // view options: 'season-outlook', 'season-to-date', 'climate-change', 'summary'\n          view: 'season-outlook'\n        }\n    }\n\n    componentDidMount() {\n        // Find all data for a given location\n        if ((this.state.locations && this.state.selected)) {\n          this.loadAllData()\n        }\n    }\n\n    componentDidUpdate(prevProps,prevState) {\n        if (prevState.selected!==this.state.selected) {\n          this.loadAllData()\n        }\n        if (prevState.locations!==this.state.locations) { ls.set(this.toolName+'.locations',this.state.locations) }\n        if (prevState.selected!==this.state.selected) { ls.set(this.toolName+'.selected',this.state.selected) }\n    }\n\n    addOneDayToStringDate = (d) => {\n      return moment(d,'YYYY-MM-DD').add(1,'days').format('YYYY-MM-DD')\n    }\n\n    subtractOneDayToStringDate = (d) => {\n      return moment(d,'YYYY-MM-DD').subtract(1,'days').format('YYYY-MM-DD')\n    }\n\n    loadAllData = () => {\n          this.handleDataIsLoadingChange(true)\n          setTimeout(() => {\n\n            LoadPointData({param:this.getAcisParamsObs()})\n              .then(response_obs => {\n\n                //handle observed data\n                let data_obs = response_obs['data']\n                data_obs = data_obs.filter(item => item[1] !== -999 && item[2] !== -999)\n                let last_obs_date = data_obs.slice(-1)[0][0]\n\n                LoadPointDataFcst({param:this.getAcisParamsFcst(last_obs_date)})\n                  .then(response_fcst => {\n\n                    //handle forecast data\n                    // - need to convert string temperatures to int\n                    // - need to convert dates one day forward for consistency with morning obs\n                    let data_fcst = []\n                    if ('dlyData' in response_fcst) {\n                      data_fcst.push(...response_fcst['dlyData'].map(item => [this.addOneDayToStringDate(item[0].split('T')[0]),parseInt(item[2],10),parseInt(item[3],10)]))\n                    }\n                    if ('dlyFcstData' in response_fcst) {\n                      data_fcst.push(...response_fcst['dlyFcstData'].map(item => [this.addOneDayToStringDate(item[0].split('T')[0]),parseInt(item[1],10),parseInt(item[2],10)]))\n                    }\n                    data_fcst = data_fcst.filter(item => item[0] > last_obs_date)\n\n                    // combine obs and fcst data into one array\n                    let data_obs_fcst = data_obs.concat(data_fcst)\n                    let result = {'data':data_obs_fcst, 'last_obs_date':last_obs_date}\n\n                    this.handleDataChange(result)\n                    this.handleDataIsLoadingChange(false)\n                  })\n              })\n            },\n            1000\n          );\n    }\n\n    getAcisParamsObs = () => {\n          return {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              \"loc\":[this.state.locations[this.state.selected]['lng'],this.state.locations[this.state.selected]['lat']].join(),\n              \"sdate\":\"1980-01-01\",\n              \"edate\":moment().format(\"YYYY-MM-DD\"),\n              \"grid\":\"nrcc-model\",\n              \"elems\":[\n                {\n                 \"name\":\"maxt\",\n                 \"interval\":[0,0,1]\n                },\n                {\n                 \"name\":\"mint\",\n                 \"interval\":[0,0,1]\n                }\n              ]})\n          };\n    }\n\n    getAcisParamsFcst = (sdate) => {\n          return {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              \"lat\":this.state.locations[this.state.selected]['lat'],\n              \"lon\":this.state.locations[this.state.selected]['lng'],\n              \"tzo\":-5,\n              //\"sdate\":\"2022061000\",\n              \"sdate\":sdate.replaceAll(\"-\",\"\")+\"00\",\n              \"edate\":\"now\",\n              })\n          };\n    }\n\n    handleSelectedLocationChange = (v) => {\n        this.setState({\n          selected: v\n        })\n    }\n\n    handleLocationInfoChange = (e) => {\n        let k = e.target.name\n        let v = e.target.value\n        this.setState(prevState => ({\n          ...prevState,\n          locations : {\n              ...prevState.locations, ...{[prevState.selected] : {...prevState.locations[prevState.selected], [k]: v} }\n          }\n        }) )\n    }\n\n    //handleLocationPickerOutput = (l,s) => {\n    handleLocationPickerOutput = (s,l) => {\n        console.log(s)\n        console.log(l)\n        // include additional items for each location (items like gdd_base, gdd_target, freeze_threshold, planting_date)\n        let l_new = {}\n        for (let k in l) {\n          if (l.hasOwnProperty(k)) {\n            if (this.state.locations.hasOwnProperty(k)) {\n              //l_new[k] = { ...this.defaultLocation, ...this.state.locations[k], ...l[k] }\n              l_new[k] = { ...this.defaultLocation, ...l[k], ...this.state.locations[k] }\n            } else {\n              l_new[k] = { ...this.defaultLocation, ...l[k] }\n            }\n          }\n        }\n        this.setState({\n          locations: l_new,\n          //selected: s['id']\n          selected: s\n        })\n    }\n\n    handleDataChange = (d) => {\n        this.setState({\n          pointData: d\n        })\n    }\n\n    handleViewChange = (v) => {\n        this.setState({\n          view: v\n        })\n    }\n\n    handleDataIsLoadingChange = (b) => {\n        this.setState({\n          dataIsLoading: b\n        })\n    }\n\n    handlePlantingDateChange = (...e) => {\n        // put data in format expected, then pass to handleLocationInfoChange\n        let e_new = { 'target': {'name':'planting_date', 'value':e[1]} }\n        this.handleLocationInfoChange(e_new)\n    }\n\n    handleTargetIsEnabledChange = () => {\n        this.setState(prevState => ({\n          targetIsEnabled: !prevState.targetIsEnabled\n        }) )\n    }\n\n    handleFreezeIsEnabledChange = () => {\n        this.setState(prevState => ({\n          freezeIsEnabled: !prevState.freezeIsEnabled\n        }) )\n    }\n\n    render() {\n\n        let display_DisplayChart;\n        let display_UserInput;\n        if (this.state.pointData) {\n            display_DisplayChart = <DisplayChart\n                        locInfo={this.state.locations[this.state.selected]}\n                        freezeIsEnabled={this.state.freezeIsEnabled}\n                        targetIsEnabled={this.state.targetIsEnabled}\n                        chartWeatherData={\n                          processWeatherData(this.state.pointData['data'],\n                          this.state.pointData['last_obs_date'],\n                          this.state.locations[this.state.selected]['planting_date'],\n                          this.state.locations[this.state.selected]['gdd_base'],\n                          this.state.locations[this.state.selected]['freeze_threshold'])\n                        }\n                        view={this.state.view}\n                        dataIsLoading={this.state.dataIsLoading}\n                      />\n        }\n\n        display_UserInput = <UserInput\n                                  locations={this.state.locations}\n                                  selected={this.state.selected}\n                                  view={this.state.view}\n                                  targetIsEnabled={this.state.targetIsEnabled}\n                                  freezeIsEnabled={this.state.freezeIsEnabled}\n                                  gdd_list={this.gdd_list}\n                                  mapbox_token={this.token}\n                                  onchange_locationPicker={this.handleLocationPickerOutput}\n                                  onchange_view={this.handleViewChange}\n                                  onchange_plantingDate={this.handlePlantingDateChange}\n                                  onchange_locInfo={this.handleLocationInfoChange}\n                                  onchange_targetIsEnabled={this.handleTargetIsEnabledChange}\n                                  onchange_freezeIsEnabled={this.handleFreezeIsEnabledChange}\n                                />\n\n        return (\n            <>\n\n              <Grid container direction=\"column\" justify=\"center\" spacing={2}>\n\n                <Grid item>\n                  <LocationPicker\n                    locations={this.state.locations}\n                    selected={this.state.selected}\n                    newLocationsCallback={this.handleLocationPickerOutput}\n                    token={this.token}\n                    modalZIndex={150}\n                  />\n                </Grid>\n\n                <Grid item>\n                </Grid>\n\n                <Grid container direction=\"row\" justify=\"center\">\n\n                  <Grid item container direction=\"column\" justify=\"flex-start\" spacing={1} md>\n                    <Hidden mdUp>\n                        <Grid item>\n                          <VarPopover content={display_UserInput} />\n                        </Grid>\n                    </Hidden>\n                    <Hidden smDown>\n                        <Grid item>\n                          {display_UserInput}\n                        </Grid>\n                    </Hidden>\n                  </Grid>\n\n                  <Grid item container direction=\"column\" justify=\"center\" alignItems=\"center\" spacing={1} md={9}>\n                      <Grid item style={{width:'100%', height:'70vh'}}>\n                        {this.state.pointData && display_DisplayChart}\n                      </Grid>\n                      <Grid item container direction=\"row\" justify=\"center\" alignItems=\"center\" spacing={1}>\n                        <Grid item>\n                          {this.state.pointData && \n                            <Button\n                              variant={this.state.view==='season-to-date' ? \"contained\" : \"outlined\"} color=\"primary\" size=\"small\"\n                              onClick={() => this.handleViewChange('season-to-date')}\n                            >\n                              Season To Date\n                            </Button>\n                          }\n                        </Grid>\n\n                        <Grid item>\n                          {this.state.pointData && \n                            <Button\n                              variant={this.state.view==='season-outlook' ? \"contained\" : \"outlined\"} color=\"primary\" size=\"small\"\n                              onClick={() => this.handleViewChange('season-outlook')}\n                            >\n                              Season Outlook\n                            </Button>\n                          }\n                        </Grid>\n                        <Grid item>\n                          {this.state.pointData && \n                            <HelpToolPopover content={<HelpMain/>} />\n                          }\n                        </Grid>\n                      </Grid>\n                  </Grid>\n\n                </Grid>\n\n              </Grid>\n\n            </>\n        );\n    }\n}\n\nexport default ToolContents;\n","///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nimport React, { Component } from 'react';\n//import { inject, observer} from 'mobx-react';\nimport { MuiThemeProvider, createMuiTheme, withStyles, withTheme  } from \"@material-ui/core/styles\";\nimport green from '@material-ui/core/colors/green';\n\n// Components\nimport ToolContents from '../components/ToolContents'\n\n// Styles\n//import '../styles/App.css'\n\nconst theme = createMuiTheme({\n  //shadows: [\"none\"],\n  shadows: Array(25).fill('none'),\n  palette: {\n    primary: {\n        main: green[800]\n    },\n    alternativeTextColor: green[800],\n  },\n  overrides: {\n    MUIDataTableBodyRow: {\n      root: {\n        '&:nth-child(odd)': {\n          backgroundColor: '#D3D3D3'\n        }\n      }\n    },\n  },\n  typography: {\n    body2: {\n      fontSize: '0.8rem',\n      '@media (min-width:960px)': {\n        fontSize: '1.0rem',\n      },\n    },\n  }\n});\n\nconst styles = theme => ({\n  root: {},\n});\n\nclass App extends Component {\n\n    render() {\n\n        return (\n            <MuiThemeProvider theme={theme}>\n              <div id=\"container\" className=\"App\">\n                  <ToolContents />\n              </div>\n            </MuiThemeProvider>\n        );\n\n    }\n}\n\nexport default withStyles(styles)(withTheme(App));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import reportWebVitals from './reportWebVitals';\n\n//Components\nimport App from './components/App';\n\n//Styles\n//import './styles/index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('csftool-content')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}